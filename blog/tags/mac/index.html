<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">One post tagged with &quot;mac&quot; | Kobbi&#x27;s Knowledgebase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kbbgl.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kbbgl.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kbbgl.github.io/blog/tags/mac"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="One post tagged with &quot;mac&quot; | Kobbi&#x27;s Knowledgebase"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kbbgl.github.io/blog/tags/mac"><link data-rh="true" rel="alternate" href="https://kbbgl.github.io/blog/tags/mac" hreflang="en"><link data-rh="true" rel="alternate" href="https://kbbgl.github.io/blog/tags/mac" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kobbi&#39;s Knowledgebase RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kobbi&#39;s Knowledgebase Atom Feed"><link rel="stylesheet" href="/assets/css/styles.43c58416.css">
<script src="/assets/js/runtime~main.e3f2efcb.js" defer="defer"></script>
<script src="/assets/js/main.631c96a0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/intro">Developer Blog</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/02/07/fixing-ubuntu-hibernation">Fixing Ubuntu Hibernation</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2021</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/catch-ebusy-on-nodejs">How To Catch EBUSY Event on Windows using NodeJS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/dotless-email-regex-validation-swagger">How To Set Up Dotless Email Validation in Swagger</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/hack-the-box-archetype-challenge">Hack The Box ‘Archetype’ Challenge</a></li></ul></div></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><h1>One post tagged with &quot;mac&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/installing-ubuntu-2004-on-2013-macbook-air">Installing Ubuntu 20.04 on 2013 MacBook Air</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-03-24T00:00:00.000Z">March 24, 2021</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/kbbgl" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/14372649" alt="Kobbi Gal"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/kbbgl" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Kobbi Gal</span></a></div><small class="authorTitle_nd0D" title="I like to pick things apart and see how they work inside">I like to pick things apart and see how they work inside</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>The other day when visiting my family, under a large pile of torn up binders and laminated documents, I found my sibling’s old 2013 MacBook Air. I thought it would be wasteful to just leave it there so I picked it up and took it to the lab, AKA home.
I discovered that the laptop was password locked with my sibling’s user and password. Since it must’ve been laying at my family’s house for a few years at least, and we as human’s have a tendency to forget our credentials, I decided to save the attempts and just format it and start with a clean OS.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="formatting-and-reinstalling-macos">Formatting and Reinstalling MacOS<a href="#formatting-and-reinstalling-macos" class="hash-link" aria-label="Direct link to Formatting and Reinstalling MacOS" title="Direct link to Formatting and Reinstalling MacOS">​</a></h2>
<ol>
<li>In the <a href="https://support.apple.com/en-il/guide/mac-help/aside/mchl385f1eea/10.13/mac/10.13" target="_blank" rel="noopener noreferrer">menu bar</a>, choose Apple menu &gt; Restart. As your Mac restarts, hold down the <code>Command + R</code> keys until the macOS Utilities window appears.</li>
<li>Select <em>Disk Utility</em>, then click Continue.</li>
<li>Select your startup disk on the left, then click <em>Erase</em>.</li>
<li>Click the Format pop-up menu, choose <a href="https://support.apple.com/en-il/guide/mac-help/aside/dsku61bc26a5/10.13/mac/10.13" target="_blank" rel="noopener noreferrer">Mac OS Extended format</a>, enter a name, then click <em>Erase</em>.</li>
<li>After the disk is erased, choose <em>Disk Utility &gt; Quit Disk Utility</em>.</li>
<li>Select <a href="https://support.apple.com/en-il/guide/mac-help/reinstall-macos-mchlp1599/10.13/mac/10.13" target="_blank" rel="noopener noreferrer">Reinstall macOS</a>, click <em>Continue</em>, then follow the onscreen instructions.</li>
</ol>
<p>All of the steps ran smoothly and I had a working machine! The battery was still in really good shape as well, the screen was scratchless and the keyboard still had that bounce to it.
So I began downloading all the applications I usually use like Google Chrome, iTerm, Visual Studio Code. But when launching Google Chrome, I discovered that when navigating to GMail or Google Drive, I received an error message indicating that the applications do not support this browser and operating system.
I wasn’t buying it that the hardware would not be able to run the browser and applications and I had a strong belief that it’s some Apple-imposed limitation as part of the ‘<a href="https://en.wikipedia.org/wiki/Planned_obsolescence" target="_blank" rel="noopener noreferrer">Lightbulb Conspiracy</a>.’ So I decided to pursue a different option: installing the latest Ubuntu on this 2013 MacBook Air to free the software restrictions of the machine manufacturer and unleash the power of the hardware.
I decided the best approach would be to initially dual boot MacOS and Ubuntu, ensure that Ubuntu is stable and then remove the partition where MacOS lives.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-bootable-ubuntu-usb-stick">Create a Bootable Ubuntu USB Stick<a href="#create-a-bootable-ubuntu-usb-stick" class="hash-link" aria-label="Direct link to Create a Bootable Ubuntu USB Stick" title="Direct link to Create a Bootable Ubuntu USB Stick">​</a></h2>
<p>The first step was to generate a bootable USB stick which would hold the Ubuntu image.
I logged into MacOS and downloaded the latest Ubuntu image from <a href="https://ubuntu.com/download/desktop" target="_blank" rel="noopener noreferrer">https://ubuntu.com/download/desktop</a> and saved it in <code>~/Downloads/ubuntu-20.04.2.0-desktop-amd.iso</code>.</p>
<p>I then opened the Terminal and ran the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hdiutil convert -format UDRW -o /tmp/ubuntu.img ~/Downloads/ubuntu-20.04.2.0-desktop-amd.iso</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The command utilizes the MacOS <code>hdutil</code> tool to convert an image between two data types: <code>.iso</code> (disk image in ISO-9660 standard) to <code>.img.dmg</code> (disk image specifically by MacOS). The <code>-format UDRW</code> argument specifies that we want to read and write the image with the Apple <code>UDIF</code> format. To read more about the hdutil and UDIF format, I suggest reading the <a href="https://ss64.com/osx/hdiutil.html" target="_blank" rel="noopener noreferrer">hdutil man page</a> and <a href="http://disktype.sourceforge.net/doc/ch03s13.html" target="_blank" rel="noopener noreferrer">disk image formats</a>.</p>
<p>The command above created a new file in <code>/tmp/ubuntu.img.dmg</code>. But since we don’t want to run the MacOS installer (which is what the dmg image and extension do by default) in this case but want to create a bootable USB stick, we’ll need to convert the image from <code>.img.dmg</code> to <code>.img</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mv /tmp/ubuntu.img.dmg /tmp/ubuntu.img</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>At this point we can insert the USB stick which will likely be mounted by default to <code>/dev/disk1</code>.
Next, we need to unmounting the disk representing the USB stick, copying all files from the image to the unmounted disk using the dd binary and then ejecting the disk. We can perform all these steps using the MacOS <code>diskutil</code> binary within the Terminal:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diskutil unmountDisk /dev/disk1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo dd if=/tmp/ubuntu.img of=/dev/rdisk1 bs=1m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">diskutil eject /dev/disk1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We’re done with this step! We now have a USB stick containing the Ubuntu OS. We can eject it for now.
Next, we need to prepare some disk space on the hard disk where we intend to install Ubuntu.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-partition">Creating a Partition<a href="#creating-a-partition" class="hash-link" aria-label="Direct link to Creating a Partition" title="Direct link to Creating a Partition">​</a></h2>
<p>A partition is basically a separation of the hard disk into individual sections (also known as containers).</p>
<p><img decoding="async" loading="lazy" src="https://www.maketecheasier.com/assets/uploads/2012/05/partitions-partition-diagram.png" alt="cont" class="img_ev3q"></p>
<p>To be able to run both Ubuntu and MacOS on the same machine, we require to create a partition in the hard disk to hold both operating systems.
This step is rather straightforward with the use of the MacOS Disk Utility. We need to launch it, select the first disk we see on the left navver (called <em>Macintosh HD</em> in the image below):</p>
<p>Then click on <em>Partition</em>, choose the size of the disk you want to allocate to the partition where we’ll store Ubuntu, make sure the selected format is <em>Mac OS Extended (Case-sensitive, Journaled)</em> and click Apply. My hard disk size was 120GB so I allocated 80GB to Ubuntu and left the rest for MacOS.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="replacing-macos-default-boot-manager">Replacing MacOS Default Boot Manager<a href="#replacing-macos-default-boot-manager" class="hash-link" aria-label="Direct link to Replacing MacOS Default Boot Manager" title="Direct link to Replacing MacOS Default Boot Manager">​</a></h2>
<p>Let’s recap what we have done so far:</p>
<p>What would be the next logical step? We would need to tell the machine to let us decide which operating system we want to boot into. By default, the Apple bootloader will load MacOS. To change this behavior, we need to install a different boot manager. We need <a href="https://www.rodsbooks.com/refind/" target="_blank" rel="noopener noreferrer">rEFInd Boot Manager</a> to do this.</p>
<p><a href="http://sourceforge.net/projects/refind/files/0.13.2/refind-bin-0.13.2.zip/download" target="_blank" rel="noopener noreferrer">Download the binary</a> from here and extract it:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">unzip ~/Downloads/refind-bin-0.13.2.zip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then reboot the machine and hold <code>Command + R</code>. This should bring you into Recovery Mode.</p>
<p>We need to run the <code>rEFInd</code> installation script. From the main menu bar, choose Utilities &gt; Terminal and type the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /Volumes/Macintosh\ HD/Users/YOUR_USERNAME/Downloads/refined</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./refind-install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will install the rEFInd boot manager. After it completes, shut down the machine, insert the USB stick we’ve prepared earlier and turn on the machine.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="launching-and-installing-ubuntu">Launching and Installing Ubuntu<a href="#launching-and-installing-ubuntu" class="hash-link" aria-label="Direct link to Launching and Installing Ubuntu" title="Direct link to Launching and Installing Ubuntu">​</a></h2>
<p>When we turn on the machine the next time, we will be greeted with the rEFInd Boot Manager:</p>
<p><img decoding="async" loading="lazy" src="https://www.rodsbooks.com/refind/refind.png" alt="refind" class="img_ev3q"></p>
<p>Select Tux (the penguin, Linux mascot) and use the arrows to navigate to the <em>Try Ubuntu without install</em> option. Then press <em>e</em> which will expose a configuration file where we will make some changes. We will need to add the following commands between ‘splash‘ and ‘---‘:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nomodeset radeon.audio=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is because by default, the Radeon HDMI audio driver is disabled in the Linux kernel. After making this change, press F10 to save and exit.
After a minute or two, you should be the Ubuntu menu:</p>
<p><img decoding="async" loading="lazy" src="https://ubuntucommunity.s3-us-east-2.amazonaws.com/original/2X/a/ad5e454a9fd45fd56d90da951702c2f2224cd32a.png" alt="ubuntu" class="img_ev3q"></p>
<p>Click on <em>Install Ubuntu</em>, follow the installation wizard you should be set!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="addendum-fixing-camera-detection">Addendum: Fixing Camera Detection<a href="#addendum-fixing-camera-detection" class="hash-link" aria-label="Direct link to Addendum: Fixing Camera Detection" title="Direct link to Addendum: Fixing Camera Detection">​</a></h2>
<p>One of the applications I use most nowadays is Zoom so I was surprised when I joined a call and saw that my camera was not detected by Zoom. I also downloaded <a href="https://wiki.gnome.org/Apps/Cheese" target="_blank" rel="noopener noreferrer">Cheese</a> just to confirm sure that the issue wasn’t specific to Zoom. I saw the same greeting: ‘no device detected’.
I did some research and found that there was some firmware missing for the Facetime HD (Broadcom 1570) PCIe webcam which prevented the kernel from detecting the driver. I opened up the terminal and ran the following commands to get the driver to work (you will need <code>git</code> and <code>curl</code> installed):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; cd /usr/local/src</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo git clone https://github.com/patjak/bcwc_pcie.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cloning into &#x27;bcwc_pcie&#x27;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote: Enumerating objects: 8, done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote: Counting objects: 100% (8/8), done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote: Compressing objects: 100% (6/6), done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote: Total 1057 (delta 2), reused 4 (delta 0), pack-reused 1049</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Receiving objects: 100% (1057/1057), 352.48 KiB | 537.00 KiB/s, done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resolving deltas: 100% (709/709), done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; cd /usr/local/src/bcwc_pcie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo git clone https://github.com/patjak/facetimehd-firmware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cloning into &#x27;facetimehd-firmware&#x27;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote: Enumerating objects: 1, done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote: Counting objects: 100% (1/1), done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remote: Total 886 (delta 0), reused 0 (delta 0), pack-reused 885</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Receiving objects: 100% (886/886), 290.76 KiB | 294.00 KiB/s, done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resolving deltas: 100% (585/585), done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; cd /usr/local/src/bcwc_pcie/facetimehd-firmware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking dependencies for driver download...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/curl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/xzcat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin/cpio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Downloading the driver, please wait...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Found matching hash from OS X, El Capitan 10.11.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==&gt; Extracting firmware...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --&gt; Decompressing the firmware using gzip...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --&gt; Deleting temporary files...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --&gt; Extracted firmware version 1.43.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo make install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Copying firmware into &#x27;//lib/firmware/facetimehd&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; cd /usr/local/src/bcwc_pcie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -C /lib/modules/5.0.0-23-generic/build M=/usr/local/src/bcwc_pcie modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Entering directory &#x27;/usr/src/linux-headers-5.0.0-23-generic&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /usr/local/src/bcwc_pcie/fthd_ddr.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /usr/local/src/bcwc_pcie/fthd_hw.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /usr/local/src/bcwc_pcie/fthd_drv.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /usr/local/src/bcwc_pcie/fthd_ringbuf.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /usr/local/src/bcwc_pcie/fthd_isp.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /usr/local/src/bcwc_pcie/fthd_v4l2.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /usr/local/src/bcwc_pcie/fthd_buffer.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC [M]  /usr/local/src/bcwc_pcie/fthd_debugfs.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LD [M]  /usr/local/src/bcwc_pcie/facetimehd.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Building modules, stage 2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MODPOST 1 modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC      /usr/local/src/bcwc_pcie/facetimehd.mod.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LD [M]  /usr/local/src/bcwc_pcie/facetimehd.ko</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Leaving directory &#x27;/usr/src/linux-headers-5.0.0-23-generic&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo make install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -C /lib/modules/5.0.0-23-generic/build M=/usr/local/src/bcwc_pcie modules_install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Entering directory &#x27;/usr/src/linux-headers-5.0.0-23-generic&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  INSTALL /usr/local/src/bcwc_pcie/facetimehd.ko</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">At main.c:160:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- SSL error:02001002:system library:fopen:No such file or directory: ../crypto/bio/bss_file.c:72</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- SSL error:2006D080:BIO routines:BIO_new_file:no such file: ../crypto/bio/bss_file.c:79</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sign-file: certs/signing_key.pem: No such file or directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DEPMOD  5.0.0-23-generic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: modules_install: missing &#x27;System.map&#x27; file. Skipping depmod.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make[1]: Leaving directory &#x27;/usr/src/linux-headers-5.0.0-23-generic&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Don’t worry too much about the SSL errors above, they are red herrings.
I then needed to load the drivers into the kernel:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo depmod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo modprobe -r bdc_pci</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo modprobe facetimehd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>I relaunched Cheese and saw my messy face on the camera 🙂
But once I restarted the computer, I saw that the changes were reverted. I needed to persist them somehow. After some more research, I found that I needed to add <code>facetimehd</code> to the kernel modules that are loaded during boot time:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; sudo echo facetimehd &gt;&gt; /etc/modules</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After restarting, I saw that I was able to detect my camera in Zoom and Cheese!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/mac">mac</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/ubuntu">ubuntu</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>