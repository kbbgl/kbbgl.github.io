<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-software/languages/go/concurrency/dealing_with_threads" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Dealing with Threads | Kobbi&#x27;s Knowledgebase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kbbgl.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kbbgl.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kbbgl.github.io/docs/software/languages/go/concurrency/dealing-with-threads"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dealing with Threads | Kobbi&#x27;s Knowledgebase"><meta data-rh="true" name="description" content="The OS gives us various tools to help manage concurrency. Two of them, processes and threads are used in our code. A process represents a program that is running on the system. A thread is a construct that executes within the process context to give a lightweight and  efficient approach to concurrency. A process is started with one, main thread. Processes do not share memory and therefore minimize communication with other processes."><meta data-rh="true" property="og:description" content="The OS gives us various tools to help manage concurrency. Two of them, processes and threads are used in our code. A process represents a program that is running on the system. A thread is a construct that executes within the process context to give a lightweight and  efficient approach to concurrency. A process is started with one, main thread. Processes do not share memory and therefore minimize communication with other processes."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kbbgl.github.io/docs/software/languages/go/concurrency/dealing-with-threads"><link data-rh="true" rel="alternate" href="https://kbbgl.github.io/docs/software/languages/go/concurrency/dealing-with-threads" hreflang="en"><link data-rh="true" rel="alternate" href="https://kbbgl.github.io/docs/software/languages/go/concurrency/dealing-with-threads" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kobbi&#39;s Knowledgebase RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kobbi&#39;s Knowledgebase Atom Feed"><link rel="stylesheet" href="/assets/css/styles.735d0977.css">
<script src="/assets/js/runtime~main.69fbd5f7.js" defer="defer"></script>
<script src="/assets/js/main.2c8157a7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Kobbi&#x27;s Knowledgebase</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/cloud_services/aws/configure-aws-cli">Docs</a><a class="navbar__item navbar__link" sidebarid="blogSidebar" href="/blog">Blog</a><a class="navbar__item navbar__link" sidebarid="hackBlogSidebar" href="/hack_blog">Hack Blog</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/cloud_services/aws/configure-aws-cli">cloud_services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/cybersecurity/Encryption/check-cert-cn">cybersecurity</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/hardware/cpu/computing-abstraction-layers">hardware</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/welcome">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/os/UNIX/Account Management/Controlling_File_Directory_PERMISSIONS">os</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/software/containerization/docker/admin/get-list-containers-resource-usage">software</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/containerization/docker/admin/get-list-containers-resource-usage">containerization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/infrastructure/mongodb/mongodb-query-sort-limit-regex">infrastructure</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/software/languages/ansible/ansible_cheat_sheet">languages</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/ansible/ansible_cheat_sheet">ansible</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/assembly/assemblers">assembly</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/bash/animation_in_script">bash</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/c/debugging/analyzing_coredump_with_gdb">c</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/erlang/syntax">erlang</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/software/languages/go/channels-and-routines">go</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/channels-and-routines">Channels (chan) and goroutines (Concurrency)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/software/languages/go/concurrency/foundations">concurrency</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/concurrency/foundations">Foundations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/software/languages/go/concurrency/dealing-with-threads">Dealing with Threads</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/concurrency/thread-communication">Thread Communication</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/how-to-debug-go-code-delve">Using Delve Debugger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/functions">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/go-vc-env">Go Versions and Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/interfaces">Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/maps">Maps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/run-tests">Run Tests in go</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/slices-and-loops">Slices and Loops</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/structs">Struct</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/type-conversion">Type Conversion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/using-package-modules-and-receiver-functions">Package Modules and Receiver Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/variables-and-types">Variables and Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/software/languages/go/writing-from-fs">Writing to Filesystem</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/java/Debugging/Checking_JVMs_running_on_machine">java</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/javascript/DevTools/Adding_logs_to_JavaScript_sourcecode">javascript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/powershell/arrays">powershell</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/python/Development Environment/list-pipenv-interpreters">python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/languages/regex/Find_pattern_recursively">regex</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/project_management/jira/keyboard-shortcuts">project_management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/software/version_control_systems/diff-files-ignore-lines">version_control_systems</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">software</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">languages</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">go</span><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">concurrency</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Dealing with Threads</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dealing with Threads</h1></header><p>The OS gives us various tools to help manage concurrency. Two of them, <strong>processes</strong> and <strong>threads</strong> are used in our code. A process represents a program that is running on the system. A thread is a construct that executes within the process context to give a lightweight and  efficient approach to concurrency. A process is started with one, main thread. Processes do not share memory and therefore minimize communication with other processes.</p>
<p>When we run a command such as <code>grep hello large_readme.md</code>, the following things happen:</p>
<ol>
<li>The user submits input for execution.</li>
<li>The OS places the job in the job queue.</li>
<li>Once the job is ready to execute, it is moved to the ready/run queue.</li>
<li>When the CPU frees up, the OS picks up the job from the ready queue and starts executing it on the CPU. The processor is running the instructions contained in the job.</li>
<li>As soon as the job requests an instruction to read from a file, the OS removes the job from the CPU onto an I/O waiting queue. It waits here until the requested I/O op returns data. If there&#x27;s another job in the ready queue, the OS picks it up and executes it on the CPU.</li>
<li>The device will complete the read bytes from text file  I/O operation.</li>
<li>Once the I/O operation is complete, the job moves back to the ready queue. It waits for the OS to pick it up so that it can continue execution.</li>
<li>When the CPU frees up, the OS picks up the job and continues execution instructions on the CPU (try to find match in file text).</li>
<li>The system might raise an interrupt while the job is in execution. An <strong>interrupt</strong> is a mechanism used to stop current execution and notify the system of a particular event. This is handled by the interrupt controller.</li>
<li>The OS pauses execution of current job and puts the job back on the ready queue. The job of the OS scheduling algorithm is to determined which job from the ready queue to pick up for execution.</li>
<li>Steps 4-9 will repeat until the job execution finishes.</li>
</ol>
<p>Steps 9 and 10 are an example of <strong>context switch</strong> which occurs whenever the system interrupts a job and the OS steps in to schedule another one. The OS saves the current job state so it can resume where it left off and also load the next job to be executed. This state is referred to as the <strong>process context block</strong> and is a data structure used to store all the details about a job.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="concurrency-with-processes">Concurrency with Processes<a href="#concurrency-with-processes" class="hash-link" aria-label="Direct link to Concurrency with Processes" title="Direct link to Concurrency with Processes">​</a></h3>
<p><code>CreateProcess()</code> on Windows or <code>fork()</code> on UNIX systems are syscalls that create a copy of an execution. They create the child process, allocate the required resources and loads the program code. The OS also makes a complete copy of the memory space, the process&#x27; resource handlers (registers, stack, file handlers, program counter). The new process then takes over this new memory space and continues execution from that point.</p>
<p>Support for creating and forking processes in Go is limited to the <code>syscall</code> package and is OS-specific. We find the <code>CreateProcess</code> function for Windows and <code>ForkExec</code>/<code>StartProcess</code> for UNIX.</p>
<p>Processes also do not share memory space.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="concurrency-with-threads">Concurrency with Threads<a href="#concurrency-with-threads" class="hash-link" aria-label="Direct link to Concurrency with Threads" title="Direct link to Concurrency with Threads">​</a></h3>
<p>Creating a new process is resource-heavy and provides good isolation. Threads are the answer to some of the problems that come with using processes for concurrency. Creating a thread is much faster (can reach x100) and it consumes much less resources than a process.</p>
<p>Threads share memory space and run within the context of the same process. This means that if a change is made in the main memory by one thread (e.g. changing a global variable&#x27;s value), this change is visible to all other threads. This is the main advantage of using threads, multiple threads can use this shared memory to work on the same problem together. Threads do not share stack space so local variables are only visible to the thread that created them. They also have their own instruction pointer.</p>
<p>There&#x27;s no isolation so threads can overstep each other. To prevent this, we use thread communication and synchronization.</p>
<p>In Windows, we can create a thread using <code>CreateThread()</code> syscall. In UNIX, we use the <code>clone()</code> syscall with the <code>CLONE_THREAD</code> option. Java models threads as objects, Python blocks multiple threads from executing in parallel using a global interpreter lock and Go has the concept of the goroutine.</p>
<p>goroutines give us a lightweight construct, consuming far fewer resources than the OS thread.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-goroutines">Creating goroutines<a href="#creating-goroutines" class="hash-link" aria-label="Direct link to Creating goroutines" title="Direct link to Creating goroutines">​</a></h3>
<p>Suppose we have the <a href="/assets/files/sequential-1a509e3adc997f5d16c199bac3c09795.go" target="_blank"><code>sequential.go</code></a>.</p>
<p>To put perform <code>doWork()</code> concurrently we put it in a goroutine as in <a href="/assets/files/parallel-5744ad5b5c1a9ea8b384599e039d5938.go" target="_blank"><code>parallel.go</code></a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementing-goroutines-in-user-space">Implementing goroutines in user-space<a href="#implementing-goroutines-in-user-space" class="hash-link" aria-label="Direct link to Implementing goroutines in user-space" title="Direct link to Implementing goroutines in user-space">​</a></h3>
<p>Instead of implementing threads at the kernel leve, we can have threads running
completely in user space. This means that the memory space that is part of our
application. Using user-level threads is like having different threads of
execution running inside the main kernel-level thread.</p>
<p>A process containing user-level threads will appear to have
just one thread of execution. The process is responsible for
managing, scheduling and context switching its own user-level threads.</p>
<p>Go provides a hybrid system that gives us the great performance of user-level threads
without most of the downsides. It achieves this by using a set of kernel-level threads
each managing a queue of goroutines.</p>
<p>Go&#x27;s runtime determines how many kernel-level threads
to use based on the number of logical processors. This is set by env var <code>GOMAXPROCS</code> which is by default the number of CPUs
the system has.</p>
<p>Go&#x27;s runtime will assign a <strong>local run queue</strong> (LRQ) for each kernel-level thread.
Each LRQ will contain a subset of goroutines in the program. There&#x27;s also a <strong>global run queue</strong> (GRQ)
for goroutines that Go hasn&#x27;t assigned yet to a kernel-level thread.
Each kernel-level thread will execute the goroutines present in its LRQ.
The system of moving goroutines from one queue to another is known in Go as <strong>work stealing</strong>. Its there to overcome blocking I/O calls and balancing work across processors.</p>
<p>We can force a goroutine to lock itself to an OS thread by calling <code>runtime.LockOSThread()</code> and <code>runtime.UnlockOSThread()</code>.</p>
<p>We can call the <code>runtime.Gosched()</code> after <code>go sayHello()</code> as seen in <a href="/assets/files/scheduler-7c52b77bee0e3fd0d58923ce62802b82.go" target="_blank"><code>scheduler.go</code></a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="concurrency-vs-parallelism">Concurrency vs parallelism<a href="#concurrency-vs-parallelism" class="hash-link" aria-label="Direct link to Concurrency vs parallelism" title="Direct link to Concurrency vs parallelism">​</a></h3>
<p>Concurrency is an attribute of the program code while parallelism is a property of the executing program.
Concurrent is about planning how to do many tasks at the same time. Parallelism is about performing many tasks at the same time.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/go">go</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/concurrency">concurrency</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/threads">threads</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/software/languages/go/concurrency/foundations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Foundations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/software/languages/go/concurrency/thread-communication"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Thread Communication</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#concurrency-with-processes" class="table-of-contents__link toc-highlight">Concurrency with Processes</a></li><li><a href="#concurrency-with-threads" class="table-of-contents__link toc-highlight">Concurrency with Threads</a></li><li><a href="#creating-goroutines" class="table-of-contents__link toc-highlight">Creating goroutines</a></li><li><a href="#implementing-goroutines-in-user-space" class="table-of-contents__link toc-highlight">Implementing goroutines in user-space</a></li><li><a href="#concurrency-vs-parallelism" class="table-of-contents__link toc-highlight">Concurrency vs parallelism</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Knowledgebase</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Knowledgebase</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/hack_blog">Hack Blog</a></li><li class="footer__item"><a href="https://github.com/kbbgl" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Kobbi's Knowledgebase, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>