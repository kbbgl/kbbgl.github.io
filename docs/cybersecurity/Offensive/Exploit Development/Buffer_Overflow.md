![](https://www.acunetix.com/wp-content/uploads/2019/06/buffer-overflow-1024x530.png)

A buffer overflow occurs when a payload size is larger than the allocated buffer size which causes an overwrite of program instructions and replace them with malicious instructions.

[Example](https://samsclass.info/127/proj/p16-spike.htm)

### Steps

1) Spiking - Finding vulnerable part of the program.


Use `generic_send_tcp` binary to spike.

2) Fuzzing - Sending characters to try to break program.

Need to find at which byte the program broke.

3) Finding the offset, the location where the program broke.

To generate payload according to byte location found in fuzzing step:
```bash
/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 	$NUMBER_OF_BYTES
```

Send the payload and extract the `eip` value. 

To find the offset, we run
```bash
/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 	$NUMBER_OF_BYTES -q $EIP_VALUE
```

4) Overwriting the `eip` with malicious code.

Once we know the offset, we can write 4 bytes (length of `eip`) of shellcode.

5) Finding bad characters.



6) Finding the right module.

7) Generate shellcode for reverse shell.