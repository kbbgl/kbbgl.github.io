"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[19117],{85705:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var n=o(74848),r=o(28453);const i={},s=void 0,c={id:"software/containerization/k8s/Services/6,_DNS",title:"6,_DNS",description:"DNS",source:"@site/docs/software/containerization/k8s/Services/6,_DNS.md",sourceDirName:"software/containerization/k8s/Services",slug:"/software/containerization/k8s/Services/6,_DNS",permalink:"/docs/software/containerization/k8s/Services/6,_DNS",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Local_Proxy_for_Development_",permalink:"/docs/software/containerization/k8s/Services/Local_Proxy_for_Development_"},next:{title:"Service_Update_Pattern",permalink:"/docs/software/containerization/k8s/Services/Service_Update_Pattern"}},a={},l=[{value:"DNS",id:"dns",level:2},{value:"Verifying DNS Registration",id:"verifying-dns-registration",level:3}];function d(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"dns",children:"DNS"}),"\n",(0,n.jsx)(t.p,{children:"DNS has been provided as CoreDNS by default as of v1.13. The use of CoreDNS allows for a great amount of flexibility. Once the container starts, it will run a Server for the zones it has been configured to serve. Then, each server can load one or more plugin chains to provide other functionality. As with other microservices, clients would it access using a service, kube-dns."}),"\n",(0,n.jsx)(t.h3,{id:"verifying-dns-registration",children:"Verifying DNS Registration"}),"\n",(0,n.jsx)(t.p,{children:"To make sure that your DNS setup works well and that services get registered, the easiest way to do it is to run a pod with a shell and network tools in the cluster, create a service to connect to the pod, then exec in it to do a DNS lookup."}),"\n",(0,n.jsxs)(t.p,{children:["Troubleshooting of DNS uses typical tools such as ",(0,n.jsx)(t.code,{children:"nslookup"}),", ",(0,n.jsx)(t.code,{children:"dig"}),", ",(0,n.jsx)(t.code,{children:"nc"}),", ",(0,n.jsx)(t.code,{children:"wireshark"})," and more. The difference is that we leverage a service to access the DNS server, so we need to check labels and selectors in addition to standard network concerns."]}),"\n",(0,n.jsxs)(t.p,{children:["Other steps, similar to any DNS troubleshooting, would be to check the ",(0,n.jsx)(t.code,{children:"/etc/resolv.conf"})," file of the container, as well as Network Policies and firewalls. We will cover more on Network Policies in the Security chapter."]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>c});var n=o(96540);const r={},i=n.createContext(r);function s(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);