"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[68521],{88849:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>n,metadata:()=>c,toc:()=>l});var r=i(74848),s=i(28453);const n={title:"How to Create Self-Signed TLS Certificate for Local Development",slug:"how-to-create-self-signed-tls-crt-local-dev",app2or:"kgal-akl",tags:["certificate","clm","tls","ssl","encryption"]},a=void 0,c={id:"cybersecurity/Encryption/self_signed_cert",title:"How to Create Self-Signed TLS Certificate for Local Development",description:"To enable secure communication (TLS/HTTPS) between a server (like an EC2 instance) and a client (e.g. your MacBook) in a development environment, we can create our own trusted certificates.",source:"@site/docs/cybersecurity/Encryption/self_signed_cert.md",sourceDirName:"cybersecurity/Encryption",slug:"/cybersecurity/Encryption/how-to-create-self-signed-tls-crt-local-dev",permalink:"/docs/cybersecurity/Encryption/how-to-create-self-signed-tls-crt-local-dev",draft:!1,unlisted:!1,tags:[{inline:!0,label:"certificate",permalink:"/docs/tags/certificate"},{inline:!0,label:"clm",permalink:"/docs/tags/clm"},{inline:!0,label:"tls",permalink:"/docs/tags/tls"},{inline:!0,label:"ssl",permalink:"/docs/tags/ssl"},{inline:!0,label:"encryption",permalink:"/docs/tags/encryption"}],version:"current",frontMatter:{title:"How to Create Self-Signed TLS Certificate for Local Development",slug:"how-to-create-self-signed-tls-crt-local-dev",app2or:"kgal-akl",tags:["certificate","clm","tls","ssl","encryption"]},sidebar:"docsSidebar",previous:{title:"How SSL Works",permalink:"/docs/cybersecurity/Encryption/how-ssl-works"},next:{title:"GDB Cheatsheet",permalink:"/docs/cybersecurity/Forensics/gdb/gdb-cheatsheet"}},o={},l=[{value:"(Optional) Phase 1: Create Your Certificate Authority (CA)",id:"optional-phase-1-create-your-certificate-authority-ca",level:3},{value:"Step 1.1: Create the CA&#39;s Private Key",id:"step-11-create-the-cas-private-key",level:4},{value:"Step 1.2: Create the CA&#39;s Root Certificate",id:"step-12-create-the-cas-root-certificate",level:4},{value:"Step 1.3 Install and Trust the CA",id:"step-13-install-and-trust-the-ca",level:4},{value:"Phase 2: Issue a Certificate for Your Server",id:"phase-2-issue-a-certificate-for-your-server",level:3},{value:"Step 2.1: Create the Server&#39;s Private Key",id:"step-21-create-the-servers-private-key",level:4},{value:"Step 2.2: Create a Certificate Signing Request (CSR)",id:"step-22-create-a-certificate-signing-request-csr",level:4},{value:"Step 2.3: Create the Certificate Extension File",id:"step-23-create-the-certificate-extension-file",level:4},{value:"Step 2.4: Sign the Server Certificate with Your CA",id:"step-24-sign-the-server-certificate-with-your-ca",level:4},{value:"(Optional) Add to AWS Certificate Manager",id:"optional-add-to-aws-certificate-manager",level:3},{value:"(Optional) Upload to Akeyless",id:"optional-upload-to-akeyless",level:3}];function d(e){const t={a:"a",code:"code",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"To enable secure communication (TLS/HTTPS) between a server (like an EC2 instance) and a client (e.g. your MacBook) in a development environment, we can create our own trusted certificates."}),"\n",(0,r.jsx)(t.p,{children:"This guide walks through a three-phase process on a macOS machine:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Create a Certificate Authority (CA):"})," You'll act as your own trusted authority, like a mini-Let's Encrypt."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Issue a Server Certificate:"})," Your new CA will sign a certificate for your specific domain."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Trust Your CA:"})," You'll tell your Mac's operating system to trust your CA, making the certificates it issues valid in browsers like Chrome."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"optional-phase-1-create-your-certificate-authority-ca",children:"(Optional) Phase 1: Create Your Certificate Authority (CA)"}),"\n",(0,r.jsx)(t.p,{children:'The CA is the root of trust. It\'s like creating your own local "DMV" that has the power to issue trusted ID cards (TLS certificates). If you already have a CA created, continue to Phase 2.'}),"\n",(0,r.jsx)(t.h4,{id:"step-11-create-the-cas-private-key",children:"Step 1.1: Create the CA's Private Key"}),"\n",(0,r.jsxs)(t.p,{children:["This command generates a private key for your CA. This key is the foundation of your CA's identity and ",(0,r.jsx)(t.strong,{children:"must be kept secret"}),'. It\'s the "master stamp" used to sign and validate certificates.']}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"openssl genrsa \\\n-out ca.key.pem \\\n2048\n"})}),"\n",(0,r.jsx)(t.h4,{id:"step-12-create-the-cas-root-certificate",children:"Step 1.2: Create the CA's Root Certificate"}),"\n",(0,r.jsxs)(t.p,{children:['Using the private key, we now create a public "root certificate." This file (',(0,r.jsx)(t.code,{children:"ca.pem"}),") is the public face of your CA. You'll share this with clients (like your Mac) so they know to trust certificates signed by your CA's private key."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'openssl req \\\n-x509 \\\n-new \\\n-nodes \\\n-key ca.key.pem \\\n-sha256 \\\n-days 1825 \\\n-out ca.pem \\\n-subj "/C=IL/ST=Jerusalem/L=Jerusalem/O=kbbgl.github.io/OU=Engineering/CN=kbbgl.github.io dev"\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"-x509"}),": Specifies the output should be a self-signed certificate, not a request."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"-new"}),": Indicates this is a new certificate."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"-nodes"}),': "No DES," meaning don\'t encrypt the private key with a passphrase.']}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"-key ca.key.pem"}),": The private key to use for signing."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"-days 1825"}),": Sets the certificate's validity period (5 years)."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"-out ca.pem"}),": The output file for your new public root certificate."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"-subj"}),": Provides the identity information for the certificate non-interactively."]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"step-13-install-and-trust-the-ca",children:"Step 1.3 Install and Trust the CA"}),"\n",(0,r.jsxs)(t.p,{children:["Your Mac doesn't know about your new CA yet. This command adds your CA's public root certificate (",(0,r.jsx)(t.code,{children:"ca.pem"}),") to the system's list of trusted authorities. You will be prompted for your password."]}),"\n",(0,r.jsx)(t.p,{children:"Bash"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'sudo security add-trusted-cert \\\n-d \\\n-r trustRoot \\\n-k "/Library/Keychains/System.keychain" \\\nca.pem\n'})}),"\n",(0,r.jsx)(t.p,{children:"After this, any certificate signed by your CA will be automatically trusted by browsers and other applications on your Mac, resulting in a green padlock icon."}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"phase-2-issue-a-certificate-for-your-server",children:"Phase 2: Issue a Certificate for Your Server"}),"\n",(0,r.jsxs)(t.p,{children:["Now that you have a CA, you can issue a certificate for your server (",(0,r.jsx)(t.code,{children:"kbbgl.github.io"}),")."]}),"\n",(0,r.jsx)(t.p,{children:"First, set an environment variable for the domain you'll be securing. This makes the following commands easier to copy and paste."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"export DOMAIN_NAME=kbbgl.github.io\n"})}),"\n",(0,r.jsx)(t.h4,{id:"step-21-create-the-servers-private-key",children:"Step 2.1: Create the Server's Private Key"}),"\n",(0,r.jsx)(t.p,{children:"Your server needs its own unique private key, separate from the CA's."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"openssl genrsa \\\n-out $DOMAIN_NAME.key.pem \\\n2048\n"})}),"\n",(0,r.jsx)(t.h4,{id:"step-22-create-a-certificate-signing-request-csr",children:"Step 2.2: Create a Certificate Signing Request (CSR)"}),"\n",(0,r.jsx)(t.p,{children:'The CSR is the formal "application" from your server to your CA asking for a signed certificate. It bundles the server\'s identity information (like its domain name) and its public key.'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'openssl req \\\n-new \\\n-key $DOMAIN_NAME.key.pem \\\n-out $DOMAIN_NAME.csr \\\n-subj "/C=IL/ST=Jerusalem/L=Jerusalem/O=kbbgl.github.io/OU=Engineering/CN=$DOMAIN_NAME"\n'})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"CN=$DOMAIN_NAME"}),": The ",(0,r.jsx)(t.strong,{children:"Common Name"})," must be your server's primary domain name."]}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"step-23-create-the-certificate-extension-file",children:"Step 2.3: Create the Certificate Extension File"}),"\n",(0,r.jsxs)(t.p,{children:["This configuration file provides essential modern details for the certificate, most importantly the ",(0,r.jsx)(t.strong,{children:"Subject Alternative Name (SAN)"}),". Browsers today require the SAN field to validate a domain. This is where you can list multiple domains, including wildcards."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"cat <<EOF > $DOMAIN_NAME.ext\nauthorityKeyIdentifier=keyid,issuer\nbasicConstraints=CA:FALSE\nkeyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment\nsubjectAltName = @alt_names\n[alt_names]\nDNS.1 = $DOMAIN_NAME\nDNS.2 = *.$DOMAIN_NAME\nEOF\n"})}),"\n",(0,r.jsx)(t.h4,{id:"step-24-sign-the-server-certificate-with-your-ca",children:"Step 2.4: Sign the Server Certificate with Your CA"}),"\n",(0,r.jsxs)(t.p,{children:["This is the final step. Your CA will now use its private key (",(0,r.jsx)(t.code,{children:"ca.key.pem"}),") to verify and sign the server's CSR, creating the official, public TLS certificate (",(0,r.jsx)(t.code,{children:".crt"})," file). This is the file you will install on your web server (e.g., Nginx)."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"openssl x509 \\\n-req \\\n-in $DOMAIN_NAME.csr \\\n-CA ca.pem \\\n-CAkey ca.key.pem \\\n-CAcreateserial \\\n-out $DOMAIN_NAME.crt.pem \\\n-days 825 \\\n-sha256 \\\n-extfile $DOMAIN_NAME.ext\n"})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h3,{id:"optional-add-to-aws-certificate-manager",children:"(Optional) Add to AWS Certificate Manager"}),"\n",(0,r.jsxs)(t.p,{children:["See ",(0,r.jsx)(t.a,{href:"/docs/cloud_services/aws/managing-certificates-acm#import-certificate",children:"Managing Amazon Certificate Manager"})]}),"\n",(0,r.jsx)(t.h3,{id:"optional-upload-to-akeyless",children:"(Optional) Upload to Akeyless"}),"\n",(0,r.jsxs)(t.p,{children:["See ",(0,r.jsx)(t.a,{href:"/docs/cybersecurity/secrets_management/akeyless/akeyless-cli-cheatsheet#create-a-certificate",children:"Create a certificate in Akeyless"})]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>c});var r=i(96540);const s={},n=r.createContext(s);function a(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);