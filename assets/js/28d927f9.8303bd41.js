"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[57734],{44003:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>d});var o=t(74848),r=t(28453);const c={slug:"tcpdump-container",title:"TCP Dump in Container",authors:["kbbgl"],tags:["docker","network","debug","tcpdump"]},i=void 0,s={id:"software/containerization/docker/network/run_tcpdump_in_containers",title:"TCP Dump in Container",description:"Set up sidecar container with tcpdump:",source:"@site/docs/software/containerization/docker/network/run_tcpdump_in_containers.md",sourceDirName:"software/containerization/docker/network",slug:"/software/containerization/docker/network/tcpdump-container",permalink:"/docs/software/containerization/docker/network/tcpdump-container",draft:!1,unlisted:!1,tags:[{inline:!0,label:"docker",permalink:"/docs/tags/docker"},{inline:!0,label:"network",permalink:"/docs/tags/network"},{inline:!0,label:"debug",permalink:"/docs/tags/debug"},{inline:!0,label:"tcpdump",permalink:"/docs/tags/tcpdump"}],version:"current",frontMatter:{slug:"tcpdump-container",title:"TCP Dump in Container",authors:["kbbgl"],tags:["docker","network","debug","tcpdump"]},sidebar:"tutorialSidebar",previous:{title:"List Open Connectios in Container",permalink:"/docs/software/containerization/docker/network/list-open-connections-container"},next:{title:"Use Host Network",permalink:"/docs/software/containerization/docker/network/set-host-net"}},a={},d=[];function l(e){const n={a:"a",code:"code",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.a,{href:"https://developers.redhat.com/blog/2019/02/27/sidecars-analyze-debug-network-traffic-kubernetes-pod/",children:["Set up sidecar container with ",(0,o.jsx)(n.code,{children:"tcpdump"}),":"]})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Add to container to deployment:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yml",children:"- name: tcpdump\n   image: corfr/tcpdump\n   command:\n     - /bin/sleep\n     - infinity\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://developers.redhat.com/blog/wp-content/uploads/2019/02/Screenshot-2019-02-20-at-09.17.56.png",alt:""})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["Retrieve ",(0,o.jsx)(n.code,{children:"docker"})," container IDs:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'sudo docker ps -a -f "name=tcpdump" --format "{{.ID}}"\nf306e8198bfa\n91fff43bd3aa\n573e90053c1f\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["Run container as ",(0,o.jsx)(n.code,{children:"root"}),":"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo docker exec -u root -it f306e8198bfa tcpdump -A -s 0\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>s});var o=t(96540);const r={},c=o.createContext(r);function i(e){const n=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);