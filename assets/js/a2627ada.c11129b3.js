"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[76275],{61956:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var i=n(74848),l=n(28453);const r={slug:"os-linux-system-monitoring-i-o-scheduling",title:"I/O Scheduling",authors:["kbbgl"],tags:["os","linux","system_monitoring","i_o_scheduling"]},o="I/O Scheduling",t={id:"os/linux/system_monitoring/i_o_scheduling",title:"I/O Scheduling",description:"The I/O scheduler provides an interface with the Generic Block Layer, which is a kernel component that handles the requests for all block devices in the system.",source:"@site/docs/os/linux/system_monitoring/i_o_scheduling.md",sourceDirName:"os/linux/system_monitoring",slug:"/os/linux/system_monitoring/os-linux-system-monitoring-i-o-scheduling",permalink:"/docs/os/linux/system_monitoring/os-linux-system-monitoring-i-o-scheduling",draft:!1,unlisted:!1,tags:[{inline:!0,label:"os",permalink:"/docs/tags/os"},{inline:!0,label:"linux",permalink:"/docs/tags/linux"},{inline:!0,label:"system_monitoring",permalink:"/docs/tags/system-monitoring"},{inline:!0,label:"i_o_scheduling",permalink:"/docs/tags/i-o-scheduling"}],version:"current",frontMatter:{slug:"os-linux-system-monitoring-i-o-scheduling",title:"I/O Scheduling",authors:["kbbgl"],tags:["os","linux","system_monitoring","i_o_scheduling"]},sidebar:"docsSidebar",previous:{title:"I/O Monitoring",permalink:"/docs/os/linux/system_monitoring/os-linux-system-monitoring-i-o"},next:{title:"System and Kernel Log Files",permalink:"/docs/os/linux/system_monitoring/os-linux-system-monitoring-important-log-files"}},c={},d=[{value:"Types of Schedulers",id:"types-of-schedulers",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"io-scheduling",children:"I/O Scheduling"})}),"\n",(0,i.jsxs)(s.p,{children:["The I/O scheduler provides an interface with the ",(0,i.jsx)(s.strong,{children:"Generic Block Layer"}),", which is a kernel component that handles the requests for all block devices in the system."]}),"\n",(0,i.jsxs)(s.p,{children:["A ",(0,i.jsx)(s.strong,{children:"block device"})," reads and writes 'blocks' of data to and from the hardware (usually a hard disk)."]}),"\n",(0,i.jsxs)(s.p,{children:["Both the ",(0,i.jsx)(s.strong,{children:"Virtual Memory (VM)"})," and ",(0,i.jsx)(s.strong,{children:"Virtual File System(VFS)"})," layers submit requests to block devices."]}),"\n",(0,i.jsx)(s.p,{children:"The scheduling scheme is loaded at kernel boot."}),"\n",(0,i.jsx)(s.p,{children:"To view the available schedulers:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Selected is cfq scheduler\ncat /sys/block/sda/queue/scheduler\nnoop deadline [cfq]\n"})}),"\n",(0,i.jsx)(s.p,{children:"To change the value:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"echo deadline > /sys/block/sda/queue/scheduler\n"})}),"\n",(0,i.jsx)(s.h2,{id:"types-of-schedulers",children:"Types of Schedulers"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Completely Fair Queue (",(0,i.jsx)(s.code,{children:"cfq"}),")"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"spreads i/o bandwidth equally across all processes submitting requests."}),"\n",(0,i.jsx)(s.li,{children:"there are 64 dispatch queues which receive requests."}),"\n",(0,i.jsx)(s.li,{children:"requests are read from all queues in round-robin and in FIFO per queue."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"deadline"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"aggressively reorders requests to prevent large latencies and improve overall performance."}),"\n",(0,i.jsx)(s.li,{children:"the kernel associates a deadline for every request."}),"\n",(0,i.jsx)(s.li,{children:"has 5 queues:"}),"\n",(0,i.jsx)(s.li,{children:"2 sorted lists (1 for reading, 1 for writing) and are arranged by the starting block."}),"\n",(0,i.jsxs)(s.li,{children:["2 FIFO lists (1 for ",(0,i.jsx)(s.code,{children:"r"}),", 1 for ",(0,i.jsx)(s.code,{children:"w"}),") and are sorted by submission time."]}),"\n",(0,i.jsx)(s.li,{children:"dispatch queue which contains requests to be sent into the device driver."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"http://books.gigatux.nl/mirror/kerneldevelopment/0672327201/images/0672327201/graphics/13fig03.gif",alt:"schedulers"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["We can tune the specifics of the scheduler by modifying different configurations in ",(0,i.jsx)(s.code,{children:"/sys/block/sda/queue/iosched"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["To check whether the device is SSD (",(0,i.jsx)(s.code,{children:"0"})," is SSD):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"cat /sys/block/$device/queue/rotational\n"})})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>t});var i=n(96540);const l={},r=i.createContext(l);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);