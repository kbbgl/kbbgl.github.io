"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[49336],{38562:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>t});var r=s(74848),c=s(28453);const a={},o="User Management",i={id:"os/UNIX/Account Management/users",title:"User Management",description:"Attributes",source:"@site/docs/os/UNIX/Account Management/users.md",sourceDirName:"os/UNIX/Account Management",slug:"/os/UNIX/Account Management/users",permalink:"/docs/os/UNIX/Account Management/users",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"SSH",permalink:"/docs/os/UNIX/Account Management/ssh"},next:{title:"Backup",permalink:"/docs/os/UNIX/Backup and Recovery/backup"}},d={},t=[{value:"Attributes",id:"attributes",level:2},{value:"Creating User Accounts",id:"creating-user-accounts",level:3},{value:"Modifying User Accounts",id:"modifying-user-accounts",level:3},{value:"Password Management",id:"password-management",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"user-management",children:"User Management"})}),"\n",(0,r.jsx)(n.h2,{id:"attributes",children:"Attributes"}),"\n",(0,r.jsxs)(n.p,{children:["Each user registered in the system has a line entry in ",(0,r.jsx)(n.code,{children:"/etc/passwd"})," which has all attributes of the user are listed. The attributes are:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Username."}),"\n",(0,r.jsx)(n.li,{children:"UID"}),"\n",(0,r.jsx)(n.li,{children:"GID"}),"\n",(0,r.jsx)(n.li,{children:"Home directory"}),"\n",(0,r.jsx)(n.li,{children:"Default Shell"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# beav - username\n# 'x' means password is set and used in `/etc/shadow`.\n# 1000 - UID\n# 1000 - GID\n# Theodore Cleaver - Comment\nbeav:x:1000:1000:Theodore Cleaver:/home/beav:/bin/bash\n"})}),"\n",(0,r.jsxs)(n.p,{children:["There are some system users (such as ",(0,r.jsx)(n.code,{children:"bin"}),", ",(0,r.jsx)(n.code,{children:"daemon"}),", ",(0,r.jsx)(n.code,{children:"sys"}),") which are created for specific purposes and cannot be used to log in (this is why their default shell is ",(0,r.jsx)(n.code,{children:"/sbin/nologin"}),")."]}),"\n",(0,r.jsx)(n.h3,{id:"creating-user-accounts",children:"Creating User Accounts"}),"\n",(0,r.jsx)(n.p,{children:"The command will create a user with the default options:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo adduser $username\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The following steps will occur when adding a new user (according to defaults set in ",(0,r.jsx)(n.code,{children:"/etc/defaults/useradd"}),"):"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The next available UID value (based on ",(0,r.jsx)(n.code,{children:"/etc/login.defs"}),") will be assigned."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["A group called ",(0,r.jsx)(n.code,{children:"$username"})," will be created and UID will be set to GID."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["A home directory ",(0,r.jsx)(n.code,{children:"/home/$username"})," will be created."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The contents of ",(0,r.jsx)(n.code,{children:"/etc/skel"})," will be copied to ",(0,r.jsx)(n.code,{children:"/home/$username"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["An entry of either ",(0,r.jsx)(n.code,{children:"!!"})," or ",(0,r.jsx)(n.code,{children:"!"})," is placed in the ",(0,r.jsx)(n.code,{children:"password"})," field of the ",(0,r.jsx)(n.code,{children:"/etc/shadow"})," file for ",(0,r.jsx)(n.code,{children:"$username"}),"'s entry, thus requiring the administrator to assign a password for the account to be active."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"modifying-user-accounts",children:"Modifying User Accounts"}),"\n",(0,r.jsxs)(n.p,{children:["This command will remove the user from ",(0,r.jsx)(n.code,{children:"/etc/passwd"}),", ",(0,r.jsx)(n.code,{children:"/etc/shadow"})," and ",(0,r.jsx)(n.code,{children:"/etc/group"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo userdel $username\n\n# Will also remove the home directory for this user\nsudo userdel -r $username \n"})}),"\n",(0,r.jsx)(n.p,{children:"This command will modify the user attributes."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo usermod $username\n\n# Will lock account so the user cannot log in\nsudo usermod -L $username\n# OR\nsudo chage -E 1970-01-01 $username\n\n# Will unlock an account\nsudo usermod -U $username\n"})}),"\n",(0,r.jsx)(n.h3,{id:"password-management",children:"Password Management"}),"\n",(0,r.jsxs)(n.p,{children:["Use of ",(0,r.jsx)(n.code,{children:"/etc/shadow"})," enables password aging on a per user basis. At the same time, it also allows for maintaining greater security of hashed passwords."]}),"\n",(0,r.jsxs)(n.p,{children:["Only user can change its own password (unless ",(0,r.jsx)(n.code,{children:"root"})," which can change for all users).\nTo change passwords:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"passwd\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To set password aging (using ",(0,r.jsx)(n.code,{children:"root"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"chage\n\n# Force user to change password on next login\nsudo chage -d 0 $username\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>i});var r=s(96540);const c={},a=r.createContext(c);function o(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);