"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[58155],{28936:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var t=n(74848),o=n(28453);const a={},i="Swap",r={id:"os/UNIX/Filesystem/swap",title:"Swap",description:"Linux employs a virtual memory system that allows it to function as if it had more memory than it physically has. Overcommiting functions two ways:",source:"@site/docs/os/UNIX/Filesystem/swap.md",sourceDirName:"os/UNIX/Filesystem",slug:"/os/UNIX/Filesystem/swap",permalink:"/docs/os/UNIX/Filesystem/swap",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Output to File and STDOUT",permalink:"/docs/os/UNIX/Filesystem/output_to_file_and_console"},next:{title:"Kernel",permalink:"/docs/os/UNIX/Kernel/"}},l={},c=[];function p(e){const s={code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"swap",children:"Swap"})}),"\n",(0,t.jsx)(s.p,{children:"Linux employs a virtual memory system that allows it to function as if it had more memory than it physically has. Overcommiting functions two ways:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Programs (such as ones that have child processes that they inherit from parent using COW) don't always use all allocated memory."}),"\n",(0,t.jsx)(s.li,{children:"Less active memory regions are moved to disk when memory becomes low on the system."}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Swapping is usually done on dedicated partitions or files. ",(0,t.jsx)(s.strong,{children:"The recommended swap size is the total RAM on the system"}),". The kernel  memory is never swapped out."]}),"\n",(0,t.jsx)(s.p,{children:"We can see how much swap area the system is using:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cat /proc/swaps\n\nfree -m\n"})}),"\n",(0,t.jsx)(s.p,{children:"Other commands:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# format swap partition/file\nmkswap\n\n# activate swap partition/file\nswapon\n\n# deactivate swap partition/file\nswapoff\n"})}),"\n",(0,t.jsx)(s.p,{children:"Full procedure to create add swap:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Create fs\ndd if=/dev/zero of=swpfile bs=1M count=1024\n\n# change ownership of `swpfile# to root\nsudo chown root:root swpfile\n\n# activate swap\nsudo swapon swpfile\n\n# check it exists\ncat /proc/swapfile\nFilename    Type  Size Used Priority\n/home/app/lfs201/fs/swpfile         file  1048572 512 -2\n\n# deactivate and remove swap\nsudo swapoff swpfile\nsudo rm swpfile\n"})})]})}function d(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>r});var t=n(96540);const o={},a=t.createContext(o);function i(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);