"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[70326],{93368:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>i});var r=n(74848),t=n(28453);const o={slug:"zk-rm-obsolete-znodes",title:"Remove Obsolete ZNodes",authors:["kbbgl"],tags:["zk","query","k8s","windows"]},a=void 0,c={id:"software/infrastructure/zookeeper/remove_obsolete_znodes",title:"Remove Obsolete ZNodes",description:"add connector path to each line",source:"@site/docs/software/infrastructure/zookeeper/remove_obsolete_znodes.md",sourceDirName:"software/infrastructure/zookeeper",slug:"/software/infrastructure/zookeeper/zk-rm-obsolete-znodes",permalink:"/docs/software/infrastructure/zookeeper/zk-rm-obsolete-znodes",draft:!1,unlisted:!1,tags:[{inline:!0,label:"zk",permalink:"/docs/tags/zk"},{inline:!0,label:"query",permalink:"/docs/tags/query"},{inline:!0,label:"k8s",permalink:"/docs/tags/k-8-s"},{inline:!0,label:"windows",permalink:"/docs/tags/windows"}],version:"current",frontMatter:{slug:"zk-rm-obsolete-znodes",title:"Remove Obsolete ZNodes",authors:["kbbgl"],tags:["zk","query","k8s","windows"]},sidebar:"tutorialSidebar",previous:{title:"Get Value of Znode",permalink:"/docs/software/infrastructure/zookeeper/zk-get-key-in-znode"},next:{title:"Get Status",permalink:"/docs/software/infrastructure/zookeeper/zk-status"}},l={},i=[];function p(e){const s={code:"code",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"zkCli.sh -server localhost:2181 ls /my_app | awk -F'[][]' '{print $2}' | tr ',' '\\n' | sed -e 's/^[[:space:]]*//' | grep \"_\" > /tmp/my_app.txt\n"})}),"\n",(0,r.jsx)(s.p,{children:"add connector path to each line"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sed -i -e 's/^/rmr \\/my_app\\//' my_app.txt\n"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"./bin/zkCli.sh -server localhost:2181 <<EOF\nrmr /my_app/query_35554281-a497-4f8a-b828-7681fc7a74b0\nrmr /my_app/query_6a3726d1-a0a6-45c5-a3b6-4edd2db2dd6f\nrmr /my_app/query_6f7542a1-523a-46db-9374-938757df41ae\nrmr /my_app/query_9bcea156-f255-4b3a-abd9-70f44c690824\n...\nquit\nEOF\n"})}),"\n",(0,r.jsx)(s.p,{children:"Full script"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"echo \"./bin/zkCli.sh -server localhost:2181 <<EOF\" >> clean_zk_my_app.sh\nzkCli.sh -server localhost:2181 ls /my_app | awk -F'[][]' '{print $2}' | tr ',' '\\n' | sed -e 's/^[[:space:]]*//' | grep \"_\" | sed -e 's/^/rmr \\/my_app\\//' >> clean_zk_my_app.sh\necho quit >> clean_zk_my_app.sh\necho EOF >> clean_zk_my_app.sh\nchmod u+x clean_zk_my_app.sh\n. clean_zk_my_app.sh\n"})})]})}function d(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>c});var r=n(96540);const t={},o=r.createContext(t);function a(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);