"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[66427],{8057:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>l,toc:()=>d});var i=n(74848),r=n(28453);const c={},o="File Permissions and Ownership",l={id:"os/UNIX/Account Management/file_permissions",title:"File Permissions and Ownership",description:"Each file has access rights associated to it. There are 3 groups of permissions:",source:"@site/docs/os/UNIX/Account Management/file_permissions.md",sourceDirName:"os/UNIX/Account Management",slug:"/os/UNIX/Account Management/file_permissions",permalink:"/docs/os/UNIX/Account Management/file_permissions",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Execute Command as Another User",permalink:"/docs/os/UNIX/Account Management/execute_command_as_another_user"},next:{title:"Group Management",permalink:"/docs/os/UNIX/Account Management/groups"}},a={},d=[{value:"<code>chmod</code>",id:"chmod",level:2},{value:"<code>chown</code> and <code>chgrp</code>",id:"chown-and-chgrp",level:3},{value:"<code>umask</code>",id:"umask",level:3},{value:"Filesystem Access Control Lists (ACLs)",id:"filesystem-access-control-lists-acls",level:3}];function t(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"file-permissions-and-ownership",children:"File Permissions and Ownership"})}),"\n",(0,i.jsx)(s.p,{children:"Each file has access rights associated to it. There are 3 groups of permissions:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"owner/user"}),": the owner of the file ."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"group"}),": the group of users who have access."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"world/other"}),": rest of the world."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"In the example below:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ls -l /usr/bin/vi\n-rw-rw-r-- 1 coop aproject 1601 Mar 9 15:04 a_file\n"})}),"\n",(0,i.jsxs)(s.p,{children:["The user is ",(0,i.jsx)(s.code,{children:"coop"})," and the group is ",(0,i.jsx)(s.code,{children:"aproject"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"Each file also has access right:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"r"}),": read access is allowed"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"w"}),": write access"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"x"}),": execute."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"-"}),": means that the permission is not allowed on the specific access right."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"chmod",children:(0,i.jsx)(s.code,{children:"chmod"})}),"\n",(0,i.jsxs)(s.p,{children:["A user that owns a file can change it's permissions using ",(0,i.jsx)(s.code,{children:"chmod"})," (unless root)."]}),"\n",(0,i.jsx)(s.p,{children:"For example:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"$ ls -l a_file\n-rw-rw-r-- 1 coop coop 1601 Mar 9 15:04 a_file\n\n# give user and world execution permission\n# remove group write permission\n\n$ chmod uo+x,g-w a_file\n$ ls -l a_file\n-rwxr--r-x 1 coop coop 1601 Mar 9 15:04 a_file\n"})}),"\n",(0,i.jsx)(s.p,{children:"We can also set permissions using octal digits. The octal number representation is the sum of each digit:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"4"})," if the read permission is desired"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"2"})," if the write permission is desired"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"1"})," if the executre permission is desired"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# 7 means rwx for user\n# 5 means rx for group\n# 5 means rx for world\nchmod 755 a_file\n"})}),"\n",(0,i.jsx)(s.p,{children:"We can also see the list of permissions in octal:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'stat -c "%a %n" a_file\n664 file\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://lwstatic-a.akamaihd.net/kb/wp-content/uploads/2019/11/fig_permissions_chmod-command.jpg",alt:"chmod"})}),"\n",(0,i.jsxs)(s.h3,{id:"chown-and-chgrp",children:[(0,i.jsx)(s.code,{children:"chown"})," and ",(0,i.jsx)(s.code,{children:"chgrp"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"chown"})," is used to change file ownership. ",(0,i.jsx)(s.code,{children:"chgrp"})," is used to change the group file ownership."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"chgrp $some_group /path/to/file\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"chown $some_user /path/to/file\n"})}),"\n",(0,i.jsx)(s.p,{children:"We can change both the group and user file ownership in one:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"chown $some_user:$some_group /path/to/file\n\n# Recursive\nchown -R $some_user:$some_group /path/to/dir\n"})}),"\n",(0,i.jsx)(s.h3,{id:"umask",children:(0,i.jsx)(s.code,{children:"umask"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"umask"}),", or the user file-creation mode, is a Linux command that is used to assign the default file permission sets for newly created folders and files."]}),"\n",(0,i.jsx)(s.p,{children:"When a new file is created, it is created by default with:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'touch file\nstat -c "%a %n" file\n664\n'})}),"\n",(0,i.jsx)(s.p,{children:"When a new directory is created:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'mkdir dir\nstat -c "%a %n" dir\n775 dir\n'})}),"\n",(0,i.jsx)(s.p,{children:"The default value is:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"umask\n0002\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Which means that the created file default permission for world will drop by 2 (",(0,i.jsx)(s.code,{children:"666 -> 664"}),") and the directory by 2 (",(0,i.jsx)(s.code,{children:"777 -> 775"}),")."]}),"\n",(0,i.jsx)(s.p,{children:"We can set it by:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"umask 0022\n"})}),"\n",(0,i.jsx)(s.h3,{id:"filesystem-access-control-lists-acls",children:"Filesystem Access Control Lists (ACLs)"}),"\n",(0,i.jsx)(s.p,{children:"Linux extends the user/group/world and r/w/x permission model with the full POSIX ACLs."}),"\n",(0,i.jsx)(s.p,{children:"The ACLs must be implemented in the particular filesystem for them to be available."}),"\n",(0,i.jsx)(s.p,{children:"Some commands to manage ACLs:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"getfacl file|directory\nsetfacl -m u:$user:rx /home/$user2/file1\n\n# Remove ACL\nsetfacl -x u:$user /home/$user2/file\n\n"})})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(96540);const r={},c=i.createContext(r);function o(e){const s=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(c.Provider,{value:s},e.children)}}}]);