"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[48970],{30147:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>m,frontMatter:()=>c,metadata:()=>o,toc:()=>d});var a=t(74848),s=t(28453);const c={},r=void 0,o={id:"software/containerization/k8s/Volumes and Data/Secrets",title:"Secrets",description:"Secrets",source:"@site/docs/software/containerization/k8s/Volumes and Data/Secrets.md",sourceDirName:"software/containerization/k8s/Volumes and Data",slug:"/software/containerization/k8s/Volumes and Data/Secrets",permalink:"/docs/software/containerization/k8s/Volumes and Data/Secrets",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Persistent_Volumes_and_Claims",permalink:"/docs/software/containerization/k8s/Volumes and Data/Persistent_Volumes_and_Claims"},next:{title:"Secrets_and_EnvVars",permalink:"/docs/software/containerization/k8s/Volumes and Data/Secrets_and_EnvVars"}},i={},d=[{value:"Secrets",id:"secrets",level:2},{value:"Copy Secrets Between Namespaces",id:"copy-secrets-between-namespaces",level:3}];function l(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"secrets",children:"Secrets"}),"\n",(0,a.jsxs)(n.p,{children:["Some data should not be read and can be encrypted/encoded using the ",(0,a.jsx)(n.code,{children:"Secret"})," API."]}),"\n",(0,a.jsxs)(n.p,{children:["To create a ",(0,a.jsx)(n.code,{children:"Secret"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic --help\n\nkubectl create secret generic mysql --from-literal=password=root\n"})}),"\n",(0,a.jsxs)(n.p,{children:["To create an encoded ",(0,a.jsx)(n.code,{children:"Secret"})," manually:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"echo safyryaifa | base64\nc2FmeXJ5YWlmYQo=\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: my-secret\ndata:\n  password: c2FmeXJ5YWlmYQo=\n"})}),"\n",(0,a.jsxs)(n.p,{children:["By default, ",(0,a.jsx)(n.code,{children:"Secret"}),"s are base-64 encoded. To encrypt, an ",(0,a.jsx)(n.code,{children:"EncryptionConfiguration"})," resource must be created with a key and identity."]}),"\n",(0,a.jsx)(n.h3,{id:"copy-secrets-between-namespaces",children:"Copy Secrets Between Namespaces"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n\n# Usage: ./copy_secret.sh <secret_name> <source_ns> <dest_ns>\n\nSECRET_NAME=$1\nSOURCE_NS=$2\nDEST_NS=$3\n\nif [[ -z "$SECRET_NAME" || -z "$SOURCE_NS" || -z "$DEST_NS" ]]; then\n    echo "Usage: $0 <secret-name> <source-namespace> <destination-namespace>"\n    exit 1\nfi\n\necho "Copying secret \'$SECRET_NAME\' from \'$SOURCE_NS\' to \'$DEST_NS\'..."\n\n# 1. Get the secret as JSON\n# 2. Strip out system-generated metadata (uid, resourceVersion, etc.)\n# 3. Change the namespace field\n# 4. Apply it to the new namespace\nkubectl get secret "$SECRET_NAME" --namespace="$SOURCE_NS" -o json | \\\njq \'del(.metadata.namespace,.metadata.resourceVersion,.metadata.uid,.metadata.creationTimestamp,.metadata.selfLink,.metadata.managedFields)\' | \\\nkubectl apply --namespace="$DEST_NS" -f -\n\nif [ $? -eq 0 ]; then\n    echo "Success: Secret \'$SECRET_NAME\' is now in \'$DEST_NS\'"\nelse\n    echo "Error: Failed to copy secret."\nfi\n'})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var a=t(96540);const s={},c=a.createContext(s);function r(e){const n=a.useContext(c);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(c.Provider,{value:n},e.children)}}}]);