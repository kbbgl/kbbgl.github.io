"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[61911],{34211:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});var i=s(74848),o=s(28453);const r={},c=void 0,t={id:"os/UNIX/Network/DNS/BIND",title:"BIND",description:"BIND",source:"@site/docs/os/UNIX/Network/DNS/7._BIND.md",sourceDirName:"os/UNIX/Network/DNS",slug:"/os/UNIX/Network/DNS/BIND",permalink:"/docs/os/UNIX/Network/DNS/BIND",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"DNS_Client_Resolver",permalink:"/docs/os/UNIX/Network/DNS/DNS_Client_Resolver"},next:{title:"DNS_Tools",permalink:"/docs/os/UNIX/Network/DNS/DNS_Tools"}},d={},l=[{value:"BIND",id:"bind",level:2},{value:"Configuration",id:"configuration",level:3},{value:"<code>BIND</code> as a Caching Nameserver",id:"bind-as-a-caching-nameserver",level:3},{value:"<code>BIND</code> Zone Configuration",id:"bind-zone-configuration",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"bind",children:"BIND"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"BIND"})," is a widely-used, ISC standard DNS Internet software. It is available for most UNIX-type systems."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["It can be run inside of a ",(0,i.jsx)(n.code,{children:"chroot"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"DNSSEC "}),"(Domain Name System Security Extensions) - security extensions"]}),"\n",(0,i.jsx)(n.li,{children:"It allows for different views - different DNS answers, depending on the source IP address"}),"\n",(0,i.jsx)(n.li,{children:"It has IPv6 support"}),"\n",(0,i.jsxs)(n.li,{children:["It includes the ",(0,i.jsx)(n.code,{children:"rndc"})," (Remote Name Daemon Control) utility."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Settings for the ",(0,i.jsx)(n.code,{children:"BIND"})," configuration file are stored in ",(0,i.jsx)(n.code,{children:"/etc/named.conf"})," in CentOS/OpenSUSE or ",(0,i.jsx)(n.code,{children:"/etc/bind/named.conf"})," in Ubuntu."]}),"\n",(0,i.jsx)(n.p,{children:"Some popular configuration options include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"listen-on"}),"- Port and IP to listen for connections."]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"listen-on-v6"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"allow-query"})," - Controls hosts which can make queries of the server."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"recursion"})," - Controls the server acting as a recursive resolver."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"forwarders"})," - When acting as a recursive resolver, controls which nameservers we should query first."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"forward-first"})," - Controls where the first recursive query happens (forwarders or 'root' domain)."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["To check the configuration file for proper syntax, use the ",(0,i.jsx)(n.code,{children:"named-checkconf"})," command. When named is running in a ",(0,i.jsx)(n.code,{children:"chroot"}),", use the syntax ",(0,i.jsx)(n.code,{children:"named-checkconf -t <CHROOTDIR>"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"named-checkconf"})," command can also test load any defined master zone files by using the ",(0,i.jsx)(n.code,{children:"-z"})," switch."]}),"\n",(0,i.jsxs)(n.h3,{id:"bind-as-a-caching-nameserver",children:[(0,i.jsx)(n.code,{children:"BIND"})," as a Caching Nameserver"]}),"\n",(0,i.jsxs)(n.p,{children:["Notice the location and names are different, but the configuration has the same elements; they just may be moved into different files. The key configuration file is ",(0,i.jsx)(n.code,{children:"named.conf"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"To set up a caching nameserver:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install the package:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"apt-get install bind9\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Change the configuration to listen on a public interface (",(0,i.jsx)(n.code,{children:"listen-on"}),", ",(0,i.jsx)(n.code,{children:"listen-on-v6"}),", ",(0,i.jsx)(n.code,{children:"allow-query"}),"):"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"/etc/bind/named.conf\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Start the BIND daemon:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"systemctl start bind9\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"bind-zone-configuration",children:[(0,i.jsx)(n.code,{children:"BIND"})," Zone Configuration"]}),"\n",(0,i.jsxs)(n.p,{children:["When it comes to the ",(0,i.jsx)(n.code,{children:"BIND "}),"zone configuration, each authoritative zone needs a definition in ",(0,i.jsx)(n.code,{children:"named.conf"}),". Slave zones also are defined in ",(0,i.jsx)(n.code,{children:"named.conf"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["A zone definition for a master zone in ",(0,i.jsx)(n.code,{children:"named.conf"})," looks like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'zone "example.com." IN {\n   type master;\n   file "example.com.zone";\n}; \n'})}),"\n",(0,i.jsxs)(n.p,{children:["A zone definition for a slave zone in ",(0,i.jsx)(n.code,{children:"named.conf"})," looks like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'zone "foo.example." IN {\n   type slave;\n   masters { 192.168.122.11; 192.168.131.45; };\n};\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var i=s(96540);const o={},r=i.createContext(o);function c(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);