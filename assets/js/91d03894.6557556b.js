"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[80047],{57455:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>t});var r=s(74848),a=s(28453);const i={},c="Package Management Systems",l={id:"os/UNIX/pms",title:"Package Management Systems",description:"Types of packages",source:"@site/docs/os/UNIX/pms.md",sourceDirName:"os/UNIX",slug:"/os/UNIX/pms",permalink:"/docs/os/UNIX/pms",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Control Groups",permalink:"/docs/os/UNIX/cgroups"},next:{title:"Send a Message to a user",permalink:"/docs/os/UNIX/send_message_to_user_ssh"}},o={},t=[{value:"Types of packages",id:"types-of-packages",level:2},{value:"Packaging Tool Levels",id:"packaging-tool-levels",level:2},{value:"Package Sources",id:"package-sources",level:2},{value:"Revision Control Systems",id:"revision-control-systems",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"package-management-systems",children:"Package Management Systems"})}),"\n",(0,r.jsx)(n.h2,{id:"types-of-packages",children:"Types of packages"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Binary"}),": compiled executables per architecture."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source"}),": packages with source code that can be compiled for particular architecture."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"packaging-tool-levels",children:"Packaging Tool Levels"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"High: automatic package dependency resolution."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"apt"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"yum"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Low: manual dependency and installation of package dependencies."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"rpm"})," (Red Hat Package Manager)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"By default, manages local repository  packages."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Binary package format ",(0,r.jsx)(n.code,{children:"<name>-<version>-<release>.<distro>.<architecture>.rpm"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Source package format ",(0,r.jsx)(n.code,{children:"<name>-<version>-<release>.<distro>.src.rpm"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["database is held in ",(0,r.jsx)(n.code,{children:"/var/lib/rpm"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["helper scripts are located in ",(0,r.jsx)(n.code,{children:"/usr/lib/rpm/"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["can create ",(0,r.jsx)(n.code,{children:"rpmrc"})," file to modify ",(0,r.jsx)(n.code,{children:"rpm"})," defaults. ",(0,r.jsx)(n.code,{children:"rpm"})," looks for the file in order ",(0,r.jsx)(n.code,{children:"/usr/lib/rpm/rpmrc"}),", ",(0,r.jsx)(n.code,{children:"/etc/rpmrc"}),", ",(0,r.jsx)(n.code,{children:"~/.rpmrc"})," and reads all of them. Can use ",(0,r.jsx)(n.code,{children:"--rcfile"})," as an argument to specify as well."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Useful query commands"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Version of package?\nrpm -q bash\n\n# Which package did file come from?\nrpm -qf /bin/bash\n\n# What files were installed by the package?\nrpm -ql bash\n\n# Show package info\nrpm -qi bash\n\n# Show package info from file\nrpm -qip foo-1.0.0-1.noarch.rpm\n\n# List all packages installed\nrpm -qa\n\n# List package dependencies\nrpm -qp --requires some_package-0.0.1-noarch.rpm\n\n# What installed package provides a particular requisite package\nrpm -q --whatprovides libc.so.6\n\n# Verify package matches `rpm` database\n\nrpm -V bash\n\n# Install a package\nrpm -i bash-4.4.19-8.el8_0.x86_64\n\n# Dry run erase a package\nrpm -e nano --test\n\n# Update package(s)\nrpm -U bash-4.4.19-10.el8.x86_64.rpm another_pkg\n\n# Revert to older package\nrpm -U --oldpackage bash-4.3.19-10.el8.x86_64.rpm\n\n# Upgrade multiple packages in directory\nrpm -F *.rpm\n\n# Install kernel (don't upgrade since it removes older kernels!)\nrpm -ivh kernel-{version}.{arch}.rpm\n\n# Convert .rpm to cpio\nrpm2cpio foobar.rpm > foobar.cpio\n\n# List files in RPM package\nrpm2cpio -qlp bash-XXX.rpm\n\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"dpkg"})," (Debian Package Manager)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"*.deb"})," prefix."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Database location ",(0,r.jsx)(n.code,{children:"/var/lib/dpkg"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Standard naming format ",(0,r.jsx)(n.code,{children:"<name>_<version>-<revision_number>_<architecture>.deb"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"A source package consists of:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["unmodified sourcecode in ",(0,r.jsx)(n.code,{children:".tar.gz"})," format."]}),"\n",(0,r.jsxs)(n.li,{children:["A description file ",(0,r.jsx)(n.code,{children:".dsc"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Patch/additional files ",(0,r.jsx)(n.code,{children:".debian.tag.gz"})," or ",(0,r.jsx)(n.code,{children:".diff.gz"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Commands"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List all installed packages\ndpkg -l \n\n# List files installed in package\ndpkg -L curl\n\n# Show information about installed package\ndpkg -p udev\n\n# See what package owns a file\ndpkg -S /etc/init/networking.conf\n\n# Show file status\ndpkg -s wget\n\n# Verify installed package integrity\ndpkg -V wget\n\n# Install/upgrade package\ndpkg -i foobar.deb\n\n# Remove package (- config)\ndpkg -r package\n\n# Purge package (+ config)\ndpkg -P package\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"package-sources",children:"Package Sources"}),"\n",(0,r.jsx)(n.p,{children:"Distros have package repositories that contain all information about most up-to-date software."}),"\n",(0,r.jsx)(n.h2,{id:"revision-control-systems",children:"Revision Control Systems"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"git"})," has two data strcutures:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"object database (`"}),"\n",(0,r.jsxs)(n.li,{children:["/.git/objects`:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Blobs"}),": chunks of binary data containing file contents. Can use ",(0,r.jsx)(n.code,{children:"git cat-file"})," to translate binary data to human-friendly text."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Trees"}),": sets of blobs that construct the directory structure."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Commits"}),": changesets describing tree snapshots."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"directory cache : captures the current state of the directory tree."}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var r=s(96540);const a={},i=r.createContext(a);function c(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);