"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[39311],{97845:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>r,default:()=>g,frontMatter:()=>i,metadata:()=>t,toc:()=>c});var o=n(74848),l=n(28453);const i={slug:"os-linux-system-monitoring-important-log-files",title:"System and Kernel Log Files",authors:["kbbgl"],tags:["os","linux","system_monitoring","important_log_files"]},r="System and Kernel Log Files",t={id:"os/linux/system_monitoring/important_log_files",title:"System and Kernel Log Files",description:"System - /var/log/sys",source:"@site/docs/os/linux/system_monitoring/important_log_files.md",sourceDirName:"os/linux/system_monitoring",slug:"/os/linux/system_monitoring/os-linux-system-monitoring-important-log-files",permalink:"/docs/os/linux/system_monitoring/os-linux-system-monitoring-important-log-files",draft:!1,unlisted:!1,tags:[{inline:!0,label:"os",permalink:"/docs/tags/os"},{inline:!0,label:"linux",permalink:"/docs/tags/linux"},{inline:!0,label:"system_monitoring",permalink:"/docs/tags/system-monitoring"},{inline:!0,label:"important_log_files",permalink:"/docs/tags/important-log-files"}],version:"current",frontMatter:{slug:"os-linux-system-monitoring-important-log-files",title:"System and Kernel Log Files",authors:["kbbgl"],tags:["os","linux","system_monitoring","important_log_files"]},sidebar:"docsSidebar",previous:{title:"I/O Scheduling",permalink:"/docs/os/linux/system_monitoring/os-linux-system-monitoring-i-o-scheduling"},next:{title:"List Services",permalink:"/docs/os/linux/system_monitoring/os-linux-system-monitoring-list-services-systemd"}},a={},c=[{value:"System - <code>/var/log/sys</code>",id:"system---varlogsys",level:2},{value:"Kernel - <code>/var/log/kern.log</code>",id:"kernel---varlogkernlog",level:2},{value:"<code>journalctl</code>",id:"journalctl",level:2},{value:"Shredding",id:"shredding",level:3},{value:"Stop logging",id:"stop-logging",level:3},{value:"Send Message to <code>syslog</code>",id:"send-message-to-syslog",level:3}];function d(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"system-and-kernel-log-files",children:"System and Kernel Log Files"})}),"\n",(0,o.jsxs)(s.h2,{id:"system---varlogsys",children:["System - ",(0,o.jsx)(s.code,{children:"/var/log/sys"})]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"non-kernel boot errors"}),"\n",(0,o.jsx)(s.li,{children:"application-related service errors and the messages that are logged during system startup."}),"\n"]}),"\n",(0,o.jsxs)(s.h2,{id:"kernel---varlogkernlog",children:["Kernel - ",(0,o.jsx)(s.code,{children:"/var/log/kern.log"})]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:"Perfect for troubleshooting kernel related errors and warnings."}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsx)(s.p,{children:"Can also come handy in debugging hardware and connectivity issues."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"journalctl",children:(0,o.jsx)(s.code,{children:"journalctl"})}),"\n",(0,o.jsx)(s.p,{children:"check logs one hour ago:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:'journalctl --since "1 hour ago"\n'})}),"\n",(0,o.jsxs)(s.p,{children:["Linux uses a daemon named ",(0,o.jsx)(s.code,{children:"syslogd"})," to log events on server. There are several other variations but the most popular Debian-based is called ",(0,o.jsx)(s.code,{children:"rsyslog"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["The configuration file is in ",(0,o.jsx)(s.code,{children:"/etc/rsyslog.conf"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["The configuration file includes a section called ",(0,o.jsx)(s.em,{children:"Rules"})," where we can see the following:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-text",children:"#### RULES ####\n\n# auth,authpriv.* /var/log/auth.log \n*.*;auth,authpriv.none -/var/log/syslog \n#cron.* /var/log/cron.log \ndaemon.* -/var/log/daemon.log \nkern.*  -/var/log/kern.log \n1pr.* -/var/log/lpr.log \nmail.* -/var/log/mail.log \nuser.* -/var/log/user.log\n"})}),"\n",(0,o.jsx)(s.p,{children:"Basic rule format is:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-text",children:"facility.priority   action\n"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"facility"})," is the program, ",(0,o.jsx)(s.code,{children:"priority"})," is type of messages to log, ",(0,o.jsx)(s.code,{children:"action"})," indicates where to store the log."]}),"\n",(0,o.jsxs)(s.p,{children:["Log rotations is configurable in ",(0,o.jsx)(s.code,{children:"/etc/logrotate.conf"}),"."]}),"\n",(0,o.jsx)(s.h3,{id:"shredding",children:"Shredding"}),"\n",(0,o.jsx)(s.p,{children:"We can shred a file to make it hard to recover:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"# -f to force change permissions to be able to shred file\n# -n N to specify how many times to shred.\nshred -f -n 10 /var/log/auth.log.*\n"})}),"\n",(0,o.jsx)(s.h3,{id:"stop-logging",children:"Stop logging"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"service rsyslog stop\n"})}),"\n",(0,o.jsxs)(s.h3,{id:"send-message-to-syslog",children:["Send Message to ",(0,o.jsx)(s.code,{children:"syslog"})]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"nc -w0 -u 0.0.0.0 5142 <<< \"<34>Oct 11 22:14:15 mymachine su: 'su root' failed for lonvick on /dev/pts/8\"\n"})}),"\n",(0,o.jsxs)(s.p,{children:["See ",(0,o.jsx)(s.a,{href:"https://blog.datalust.co/seq-input-syslog/#syslogmessageformats",children:"SysLog Message Formats"}),"\nSee ",(0,o.jsx)(s.a,{href:"https://www.techiecorner.com/1496/how-to-send-message-to-syslog-server/",children:"How to Send a messae to a syslog server"})]})]})}function g(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>t});var o=n(96540);const l={},i=o.createContext(l);function r(e){const s=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),o.createElement(i.Provider,{value:s},e.children)}}}]);