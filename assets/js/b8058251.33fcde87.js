"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[48672],{12517:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var a=n(74848),r=n(28453);const i={},s="Filtering Nested Objects",c={id:"software/languages/javascript/JSONQuery/filtering_nested_objects_on_value",title:"Filtering Nested Objects",description:"TODO clean up",source:"@site/docs/software/languages/javascript/JSONQuery/filtering_nested_objects_on_value.md",sourceDirName:"software/languages/javascript/JSONQuery",slug:"/software/languages/javascript/JSONQuery/filtering_nested_objects_on_value",permalink:"/docs/software/languages/javascript/JSONQuery/filtering_nested_objects_on_value",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Extend Context to String",permalink:"/docs/software/languages/javascript/JSONQuery/extend_context_to_string"},next:{title:"Functions",permalink:"/docs/software/languages/javascript/JSONQuery/function_dt"}},o={},l=[{value:"Initializing a Grid",id:"initializing-a-grid",level:2},{value:"Create new Context with filter",id:"create-new-context-with-filter",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"filtering-nested-objects",children:"Filtering Nested Objects"})}),"\n",(0,a.jsx)(t.p,{children:"TODO clean up"}),"\n",(0,a.jsx)(t.p,{children:"Let's say we have the following paths with interesting information:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"${Marketplace.SubscriptionService.Transaction.xrefCData.vendorId}\n${Marketplace.SubscriptionService.Transaction.xrefCData.vendorName}\n${Marketplace.SubscriptionService.Transaction.xrefCData.transactionType}\n${Marketplace.SubscriptionService.Transaction.xrefPackId}\n"})}),"\n",(0,a.jsxs)(t.p,{children:["If we want to extract the nested objects based on the filter ",(0,a.jsx)(t.code,{children:"vendor: 123"}),":"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'!Print value="${PartnerReportTransactions(val.xrefCData.vendorId == \'123\')}" extend-context=`TransactionsSummary=.=[{"transactiontype": val.xrefCData.transactionType, "pack": val.xrefPackId, "transactionid": val.xrefTransactionId}]` ignore-outputs=true\n'})}),"\n",(0,a.jsx)(t.h2,{id:"initializing-a-grid",children:"Initializing a Grid"}),"\n",(0,a.jsx)(t.p,{children:"We can then initialize"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"!setIncident marketplacetransactionstable=[]\n"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'!SetGridField columns="Transaction Type,Pack,Transaction ID" grid_id="Marketplace Transactions Table" context_path=TransactionsSummary overwrite=true keys="transactiontype,pack,transactionid"\n'})}),"\n",(0,a.jsx)(t.h2,{id:"create-new-context-with-filter",children:"Create new Context with filter"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:'\n// Get report\n!mp-subscriptions-get-report month=${MONTH} year={YEAR} using="Marketplace Susbcription Production"\n\n// Get all vendors\n!Print value=${Marketplace.SubscriptionService.Transaction.xrefCData.vendorId}\n\n// Create keys per vendor\n!Set key=v_txs value="${Marketplace.SubscriptionService.Transaction(val.xrefCData.vendorId == $VENDOR_ID)}"\n!MarketplacePartnerMonthlyReport partner_name="v" transactions=${v_txs} month=August year=2022\n'})})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>c});var a=n(96540);const r={},i=a.createContext(r);function s(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);