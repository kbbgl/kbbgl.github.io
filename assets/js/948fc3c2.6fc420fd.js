"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[73643],{22400:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var t=n(74848),r=n(28453);const i={slug:"os-linux-network-protocols-http-servers-apache",title:"Apache HTTP Server",authors:["kbbgl"],tags:["os","linux","network","protocols","http"]},s="Apache HTTP Server",a={id:"os/linux/network/protocols/http/servers/Apache",title:"Apache HTTP Server",description:"Configuration",source:"@site/docs/os/linux/network/protocols/http/servers/Apache.md",sourceDirName:"os/linux/network/protocols/http/servers",slug:"/os/linux/network/protocols/http/servers/os-linux-network-protocols-http-servers-apache",permalink:"/docs/os/linux/network/protocols/http/servers/os-linux-network-protocols-http-servers-apache",draft:!1,unlisted:!1,tags:[{inline:!0,label:"os",permalink:"/docs/tags/os"},{inline:!0,label:"linux",permalink:"/docs/tags/linux"},{inline:!0,label:"network",permalink:"/docs/tags/network"},{inline:!0,label:"protocols",permalink:"/docs/tags/protocols"},{inline:!0,label:"http",permalink:"/docs/tags/http"}],version:"current",frontMatter:{slug:"os-linux-network-protocols-http-servers-apache",title:"Apache HTTP Server",authors:["kbbgl"],tags:["os","linux","network","protocols","http"]},sidebar:"docsSidebar",previous:{title:"Squid",permalink:"/docs/os/linux/network/protocols/http/i_http_caching/os-linux-network-protocols-http-i-http-caching-4-squid"},next:{title:"Email Overview",permalink:"/docs/os/linux/network/protocols/smtp/os-linux-network-protocols-smtp-email-overview"}},l={},c=[{value:"Configuration",id:"configuration",level:2},{value:"Log Configuration",id:"log-configuration",level:2},{value:"Other Configuration Options",id:"other-configuration-options",level:2},{value:"IP/Port Virtual Hosts",id:"ipport-virtual-hosts",level:2}];function h(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"apache-http-server",children:"Apache HTTP Server"})}),"\n",(0,t.jsx)(o.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(o.p,{children:"The location of the Apache configuration files move from distribution to distribution. The name of the primary configuration file changes. The systemd.service name changes. Configuration files may have include files and directories that get merged at server start. The package name usually contains http or apache."}),"\n",(0,t.jsxs)(o.p,{children:["On RedHat, CentOS, or Fedora:\nPackage: httpd\nService: httpd\nPrimary configuration file: ",(0,t.jsx)(o.code,{children:"/etc/httpd/conf/httpd.conf"})]}),"\n",(0,t.jsxs)(o.p,{children:["On OpenSUSE:\nPackage: apache2\nService: apache2\nPrimary configuration file: ",(0,t.jsx)(o.code,{children:"/etc/apache2/httpd.conf"})]}),"\n",(0,t.jsxs)(o.p,{children:["On Debian, Ubuntu, or Linux Mint:\nPackage: apache2\nService: apache2\nPrimary configuration file: ",(0,t.jsx)(o.code,{children:"/etc/apache2/apache2.conf"})]}),"\n",(0,t.jsx)(o.p,{children:"To allow for modification and flexibility in the apache configuration file, you can include other files and directories. This allows you to avoid one large configuration file and is useful for servers with multiple sites. Many distributions use this feature to enable or disable web server configurations by installing or removing packages."}),"\n",(0,t.jsx)(o.p,{children:"The OpenSUSE distribution also allows for easy creation of additional include files and directories. To learn more, check out the /etc/sysconfig/apache2 file."}),"\n",(0,t.jsx)(o.p,{children:"Some of the default include directories are:"}),"\n",(0,t.jsxs)(o.p,{children:["CentOS:\n",(0,t.jsx)(o.code,{children:"/etc/httpd/conf.d/*.conf"})]}),"\n",(0,t.jsxs)(o.p,{children:["OpenSUSE:\n",(0,t.jsx)(o.code,{children:"/etc/apache2/conf.d/ /etc/apache2/*"})]}),"\n",(0,t.jsxs)(o.p,{children:["Ubuntu:\n",(0,t.jsx)(o.code,{children:"/etc/apache2/*-enabled /etc/apache2/*-available/"}),"\nUbuntu has active (enabled) and inactive (available) directories. See ",(0,t.jsx)(o.code,{children:"man -k a2e"})," for more details."]}),"\n",(0,t.jsx)(o.p,{children:"Other important files include the document root, log file locations, and module locations (enabled in the configuration file)."}),"\n",(0,t.jsx)(o.p,{children:"The default document root is:"}),"\n",(0,t.jsxs)(o.p,{children:["CentOS:\n",(0,t.jsx)(o.code,{children:"/var/www/html/"}),"\nOpenSUSE:\n",(0,t.jsx)(o.code,{children:"/srv/www/htdocs/"}),"\nUbuntu:\n",(0,t.jsx)(o.code,{children:"/var/www/html/"}),"\nThe default log file location is:"]}),"\n",(0,t.jsxs)(o.p,{children:["CentOS:\n",(0,t.jsx)(o.code,{children:"/var/log/httpd/"}),"\nOpenSUSE:\n",(0,t.jsx)(o.code,{children:"/var/log/apache2/"}),"\nUbuntu:\n",(0,t.jsx)(o.code,{children:"/var/log/apache2/"}),"\nTo load a module, use the following syntax:\n",(0,t.jsx)(o.code,{children:"LoadModule alias_module modules/mod_alias.so"})]}),"\n",(0,t.jsx)(o.h2,{id:"log-configuration",children:"Log Configuration"}),"\n",(0,t.jsx)(o.p,{children:"Apache has powerful logging features."}),"\n",(0,t.jsx)(o.p,{children:'To create custom logs on an Apache server, you must first define a custom log format:\nLogFormat "example-custom-fmt %h %l %u %t "%r" %>s %b" example-custom-fmt'}),"\n",(0,t.jsx)(o.p,{children:"Below you will see a list of Apache log variables."}),"\n",(0,t.jsx)(o.p,{children:"Apache Log Variables"}),"\n",(0,t.jsx)(o.p,{children:"VARIABLE EXPLANATION\n%h Remote host name\n%l Remote login name\n\u200b%u Remote user\n%t \u200bTime of request\n%r First line of request\n\u200b%s Status\n%b Size of response"}),"\n",(0,t.jsx)(o.p,{children:"Then you can create a log file, which uses your custom format:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:'CustomLog "logs/example-custom.log" example-custom-fmt\n'})}),"\n",(0,t.jsxs)(o.p,{children:["You can find a reference to all the available tokens in the ",(0,t.jsx)(o.a,{href:"http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#formats",children:"Apache Module mod_log_config module"}),"."]}),"\n",(0,t.jsx)(o.h2,{id:"other-configuration-options",children:"Other Configuration Options"}),"\n",(0,t.jsxs)(o.p,{children:["The ",(0,t.jsx)(o.code,{children:"mod_userdir"})," module is used to allow all or some users to share a part of their home directory via the web server, even without access to the main document root. The URIs will look something like ",(0,t.jsx)(o.a,{href:"http://example.com/~user/index.html",children:"http://example.com/~user/index.html"})," and will commonly be placed in the ",(0,t.jsx)(o.code,{children:"/home/user/public_html/"})," directory."]}),"\n",(0,t.jsx)(o.p,{children:"If a directory does not have an index file (index.html), the autoindex module will generate an index of the files in the directory, similar to what you see from the ls shell command."}),"\n",(0,t.jsx)(o.h2,{id:"ipport-virtual-hosts",children:"IP/Port Virtual Hosts"}),"\n",(0,t.jsxs)(o.p,{children:["For multiple web sites using multiple addresses/ports, use ",(0,t.jsx)(o.code,{children:"VirtualHost"})," stanzas, and a unique IP address and port pair."]}),"\n",(0,t.jsx)(o.p,{children:"To allow Apache to serve different sites on different IP addresses or ports, you should do the following:"}),"\n",(0,t.jsxs)(o.p,{children:["Ensure all of the IP addresses and ports are defined in a ",(0,t.jsx)(o.code,{children:"Listen"})," directive.\nAdd a stanza for each virtual host, as in the example below:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"Listen 192.168.42.11:4374\n<VirtualHost 192.168.42.11:4374>\n   ServerAdmin webmaster@host1.example.com\n    DocumentRoot /www/docs/host1.example.com\n    ServerName host1.example.com\n    ErrorLog logs/host1.example.com-error_log\n    CustomLog logs/host1.example.com-access_log common\n</VirtualHost>\n"})})]})}function d(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,o,n)=>{n.d(o,{R:()=>s,x:()=>a});var t=n(96540);const r={},i=t.createContext(r);function s(e){const o=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:o},e.children)}}}]);