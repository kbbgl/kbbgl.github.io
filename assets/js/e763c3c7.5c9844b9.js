"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[7450],{12076:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>c});var r=n(74848),i=n(28453);const a={slug:"os-linux-security-apparmor",title:"AppArmor",authors:["kbbgl"],tags:["os","linux","security","apparmor"]},o="AppArmor",t={id:"os/linux/security/AppArmor",title:"AppArmor",description:"AppArmor is an LSM alternative to SELinux. Support for it has been incorporated in the Linux kernel since 2006. It has been used by SUSE, Ubuntu and other distributions.",source:"@site/docs/os/linux/security/AppArmor.md",sourceDirName:"os/linux/security",slug:"/os/linux/security/os-linux-security-apparmor",permalink:"/docs/os/linux/security/os-linux-security-apparmor",draft:!1,unlisted:!1,tags:[{inline:!0,label:"os",permalink:"/docs/tags/os"},{inline:!0,label:"linux",permalink:"/docs/tags/linux"},{inline:!0,label:"security",permalink:"/docs/tags/security"},{inline:!0,label:"apparmor",permalink:"/docs/tags/apparmor"}],version:"current",frontMatter:{slug:"os-linux-security-apparmor",title:"AppArmor",authors:["kbbgl"],tags:["os","linux","security","apparmor"]},sidebar:"docsSidebar",previous:{title:"Signals",permalink:"/docs/os/linux/processes/os-linux-processes-signals"},next:{title:"SELinux",permalink:"/docs/os/linux/security/os-linux-security-selinux"}},l={},c=[{value:"Interacting with <code>apparmor</code>",id:"interacting-with-apparmor",level:2},{value:"Modes and Profiles",id:"modes-and-profiles",level:2},{value:"Utilities",id:"utilities",level:2}];function p(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"apparmor",children:"AppArmor"})}),"\n",(0,r.jsx)(s.p,{children:"AppArmor is an LSM alternative to SELinux. Support for it has been incorporated in the Linux kernel since 2006. It has been used by SUSE, Ubuntu and other distributions."}),"\n",(0,r.jsx)(s.p,{children:"AppArmor:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Provides Mandatory Access Control (MAC)"}),"\n",(0,r.jsx)(s.li,{children:"Allows administrators to associate a security profile to a program which restricts its capabilities"}),"\n",(0,r.jsx)(s.li,{children:"Is considered easier (by some but not all) to use than SELinux"}),"\n",(0,r.jsx)(s.li,{children:"Is considered filesystem-neutral (no security labels required)."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"AppArmor supplements the traditional UNIX Discretionary Access Control (DAC) model by providing Mandatory Access Control (MAC)."}),"\n",(0,r.jsx)(s.p,{children:"In addition to manually specifying profiles, AppArmor includes a learning mode, in which violations of the profile are logged, but not prevented. This log can then be turned into a profile, based on the program's typical behavior."}),"\n",(0,r.jsxs)(s.h2,{id:"interacting-with-apparmor",children:["Interacting with ",(0,r.jsx)(s.code,{children:"apparmor"})]}),"\n",(0,r.jsx)(s.p,{children:"Disabling/Enabling service"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo systemctl [start|stop|restart|status] apparmor\nsudo systemctl [enable|disable] apparmor\n"})}),"\n",(0,r.jsx)(s.p,{children:"To see status:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo apparmor_status\n"})}),"\n",(0,r.jsx)(s.h2,{id:"modes-and-profiles",children:"Modes and Profiles"}),"\n",(0,r.jsx)(s.p,{children:"Profiles restrict how executable programs, which have pathnames on your system, such as /usr/bin/evince, can be used."}),"\n",(0,r.jsx)(s.p,{children:"Processes can be run in either of the two modes:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Enforce Mode"}),": Applications are prevented from acting in ways which are restricted. Attempted violations are reported to the system logging files. This is the default mode. A profile can be set to this mode with aa-enforce."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Complain Mode"}),": Policies are not enforced, but attempted policy violations are reported. This is also called the learning mode. A profile can be set to this mode with aa-complain."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Linux distributions come with pre-packaged profiles, typically installed either when a given package is installed, or with an AppArmor package, such as apparmor-profiles. These profiles are stored in ",(0,r.jsx)(s.code,{children:"/etc/apparmor.d"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"For full docs:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"man apparmor.d\n"})}),"\n",(0,r.jsx)(s.h2,{id:"utilities",children:"Utilities"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"rpm -qil apparmor-utils | grep bin\u200b\n/usr/bin/aa-easyprof\n/usr/sbin/aa-audit\n/usr/sbin/aa-autodep\n/usr/\u200bsbin/aa-cleanprof\n/usr/sbin/aa-complain\n/usr/sbin/aa-decode\n/usr/sbin/aa-disable\n/usr/sbin/aa-enforce\n/usr/sbin/aa-exec\n"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# shows status of all profiles and processes with profiles\napparmor_status\n\n# show summary for AppArmor log messages\napparmor_notify\n\n# set a specified profile to complain/enforce mode\ncomplain\nenforce\n\n# unload specified profile from current kernel and prevent being loaded on system startup\ndisable\n\n# scan log files\nlogprof\n\n# help set up a basic apparmor profile for a program\neasyprof\n"})})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>t});var r=n(96540);const i={},a=r.createContext(i);function o(e){const s=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);