"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[5685],{8752:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>n,toc:()=>l});var t=o(74848),a=o(28453);const i={slug:"how-to-create-docker-image-cloud",title:"How To Create Docker Image in Cloud Provider Registry",authors:["kgal-akl"],tags:["docker","registry","images","google_cloud","aws_ecr","ecr","artifacts"]},s=void 0,n={id:"software/containerization/docker/registry/create-dev-image",title:"How To Create Docker Image in Cloud Provider Registry",description:"When developing features for certain applications (where these application are run as containers, e.g. KEDA, Dapr), we need to create a new Docker image to test out our changes. This guide explains how to do that using Google Cloud Artifact Registry and Amazon Web Services ECR.",source:"@site/docs/software/containerization/docker/registry/create-dev-image.md",sourceDirName:"software/containerization/docker/registry",slug:"/software/containerization/docker/registry/how-to-create-docker-image-cloud",permalink:"/docs/software/containerization/docker/registry/how-to-create-docker-image-cloud",draft:!1,unlisted:!1,tags:[{inline:!0,label:"docker",permalink:"/docs/tags/docker"},{inline:!0,label:"registry",permalink:"/docs/tags/registry"},{inline:!0,label:"images",permalink:"/docs/tags/images"},{inline:!0,label:"google_cloud",permalink:"/docs/tags/google-cloud"},{inline:!0,label:"aws_ecr",permalink:"/docs/tags/aws-ecr"},{inline:!0,label:"ecr",permalink:"/docs/tags/ecr"},{inline:!0,label:"artifacts",permalink:"/docs/tags/artifacts"}],version:"current",frontMatter:{slug:"how-to-create-docker-image-cloud",title:"How To Create Docker Image in Cloud Provider Registry",authors:["kgal-akl"],tags:["docker","registry","images","google_cloud","aws_ecr","ecr","artifacts"]},sidebar:"docsSidebar",previous:{title:"Use Host Network",permalink:"/docs/software/containerization/docker/network/set-host-net"},next:{title:"quay.io Tutorial",permalink:"/docs/software/containerization/docker/registry/quay-io-tutorial"}},c={},l=[{value:"GCP",id:"gcp",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create a Repository",id:"create-a-repository",level:3},{value:"Make Repository Public",id:"make-repository-public",level:3},{value:"Make Repository Private",id:"make-repository-private",level:3},{value:"AWS ECR",id:"aws-ecr",level:2}];function d(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["When developing features for certain applications (where these application are run as containers, e.g. ",(0,t.jsx)(r.a,{href:"https://github.com/kedacore/keda",children:"KEDA"}),", ",(0,t.jsx)(r.a,{href:"https://github.com/dapr/components-contrib",children:"Dapr"}),"), we need to create a new Docker image to test out our changes. This guide explains how to do that using Google Cloud Artifact Registry and Amazon Web Services ECR."]}),"\n",(0,t.jsx)(r.h2,{id:"gcp",children:"GCP"}),"\n",(0,t.jsx)(r.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(r.p,{children:"Enable the Artifact Registry service using the Google Cloud CLI:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"gcloud services enable artifactregistry.googleapis.com\n"})}),"\n",(0,t.jsx)(r.p,{children:"Configure the relevant Google Cloud Platform details:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"export GCP_LOCATION=us-east\nexport GCP_PROJECT=keda-test-env\nexport GCP_REPO_NAME=keda\n"})}),"\n",(0,t.jsx)(r.h3,{id:"create-a-repository",children:"Create a Repository"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:'gcloud artifacts repositories create $GCP_REPO_NAME \\\n    --repository-format=docker \\\n    --location=$GCP_LOCATION \\\n    --project=$GCP_PROJECT \\\n    --description="Docker repository for $GCP_REPO_NAME-related images"\n'})}),"\n",(0,t.jsx)(r.h3,{id:"make-repository-public",children:"Make Repository Public"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"gcloud artifacts repositories add-iam-policy-binding $GCP_REPO_NAME \\\n    --location=$GCP_LOCATION \\\n    --member='allUsers' \\\n    --role='roles/artifactregistry.reader' \\\n    --project=$GCP_PROJECT\n"})}),"\n",(0,t.jsx)(r.h3,{id:"make-repository-private",children:"Make Repository Private"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"gcloud artifacts repositories remove-iam-policy-binding $GCP_REPO_NAME \\\n    --location=$GCP_LOCATION \\\n    --member='allUsers' \\\n    --role='roles/artifactregistry.reader' \\\n    --project=$GCP_PROJECT\n"})}),"\n",(0,t.jsx)(r.h2,{id:"aws-ecr",children:"AWS ECR"}),"\n",(0,t.jsxs)(r.p,{children:["See ",(0,t.jsx)(r.a,{href:"/docs/cloud_services/aws/aws-ecr",children:"ECR"})]})]})}function g(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,r,o)=>{o.d(r,{R:()=>s,x:()=>n});var t=o(96540);const a={},i=t.createContext(a);function s(e){const r=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function n(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);