"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[88010],{39738:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>l});var n=t(74848),i=t(28453);const o={},r="Mounting Network Filesystems",d={id:"os/UNIX/Network/Network Filesystems/Mounting_Network_Filesystems",title:"Mounting Network Filesystems",description:"The three methods of mounting network filesystems (immediate mount -command line-; always mounted; and mounted on-demand) use a common configuration file /etc/fstab. Over the years, additional features and services have updated the options in /etc/fstab. Functionality that required external packages, services and configuration are now combined under systemd services.",source:"@site/docs/os/UNIX/Network/Network Filesystems/Mounting_Network_Filesystems.md",sourceDirName:"os/UNIX/Network/Network Filesystems",slug:"/os/UNIX/Network/Network Filesystems/Mounting_Network_Filesystems",permalink:"/docs/os/UNIX/Network/Network Filesystems/Mounting_Network_Filesystems",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Networking Alternatives",permalink:"/docs/os/UNIX/Network/LXC Virtualization/Networking_Alternatives"},next:{title:"NFS",permalink:"/docs/os/UNIX/Network/Network Filesystems/NFS"}},c={},l=[{value:"<code>mount</code> Command",id:"mount-command",level:2},{value:"Persistent Mounting Network File Systems",id:"persistent-mounting-network-file-systems",level:2},{value:"Automount Network File Systems",id:"automount-network-file-systems",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"mounting-network-filesystems",children:"Mounting Network Filesystems"})}),"\n",(0,n.jsxs)(s.p,{children:["The three methods of mounting network filesystems (immediate mount -command line-; always mounted; and mounted on-demand) use a common configuration file ",(0,n.jsx)(s.code,{children:"/etc/fstab"}),". Over the years, additional features and services have updated the options in ",(0,n.jsx)(s.code,{children:"/etc/fstab"}),". Functionality that required external packages, services and configuration are now combined under ",(0,n.jsx)(s.code,{children:"systemd"})," services."]}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"/etc/fstab"})," has slightly changed its purpose with ",(0,n.jsx)(s.code,{children:"systemd"})," from configuration file to drive the ",(0,n.jsx)(s.code,{children:"mount"})," command during system initialization to an input configuration file for the ",(0,n.jsx)(s.code,{children:"systemd-fstab-generator"})," that creates native unit files used by ",(0,n.jsx)(s.code,{children:"systemd.mount"})," during system startup. The regular mount command still looks in the ",(0,n.jsx)(s.code,{children:"/etc/fstab"})," file."]}),"\n",(0,n.jsxs)(s.p,{children:["Since the preferred method to configure file system mounts is still ",(0,n.jsx)(s.code,{children:"/etc/fstab"}),", nothing has changed for most ",(0,n.jsx)(s.code,{children:"mount"})," options. See ",(0,n.jsx)(s.code,{children:"man systemd.mount"})," for additional details."]}),"\n",(0,n.jsxs)(s.h2,{id:"mount-command",children:[(0,n.jsx)(s.code,{children:"mount"})," Command"]}),"\n",(0,n.jsx)(s.p,{children:"The universal mounting command can mount many types of filesystems, including NFS and cifs filesystems."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["If the device name is in the format ",(0,n.jsx)(s.code,{children:"SERVERNAME:/share"}),", then ",(0,n.jsx)(s.code,{children:"NFS"})," is assumed."]}),"\n",(0,n.jsxs)(s.li,{children:["If the device name is in the format ",(0,n.jsx)(s.code,{children:"SERVERNAME//share"}),", then ",(0,n.jsx)(s.code,{children:"cifs"})," is assumed."]}),"\n",(0,n.jsxs)(s.li,{children:["In most cases, the ",(0,n.jsx)(s.code,{children:"-t fstype"})," is optional."]}),"\n",(0,n.jsxs)(s.li,{children:["Supports options specific to the filesystem, like the ",(0,n.jsx)(s.code,{children:"cifs"})," username and ",(0,n.jsx)(s.code,{children:"do-"})," main options."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"persistent-mounting-network-file-systems",children:"Persistent Mounting Network File Systems"}),"\n",(0,n.jsxs)(s.p,{children:["Network filesystems can be persistently mounted through ",(0,n.jsx)(s.code,{children:"/etc/fstab"}),":"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["the ",(0,n.jsx)(s.code,{children:"fs_vfstype"})," field must be set, usually to one of the following: ",(0,n.jsx)(s.code,{children:"nfs"}),", ",(0,n.jsx)(s.code,{children:"cifs"})," or ",(0,n.jsx)(s.code,{children:"nfs4"})]}),"\n",(0,n.jsxs)(s.li,{children:["the ",(0,n.jsx)(s.code,{children:"fs_mntopts"})," field can contain options specific the network filesystem"]}),"\n",(0,n.jsxs)(s.li,{children:["the ",(0,n.jsx)(s.code,{children:"fs_freq"})," field is generally set to ",(0,n.jsx)(s.code,{children:"0"})]}),"\n",(0,n.jsxs)(s.li,{children:["the ",(0,n.jsx)(s.code,{children:"fs_passno"})," is generally set to ",(0,n.jsx)(s.code,{children:"0"}),"; setting this field to a non-zero value may cause a delay during system startup time waiting for the mount to complete."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"automount-network-file-systems",children:"Automount Network File Systems"}),"\n",(0,n.jsx)(s.p,{children:"The automount will monitor a configured mount point and, if the information in the filesystem is accessed, the mount will be executed."}),"\n",(0,n.jsx)(s.p,{children:"There may be an option to disconnect an idle connection."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.code,{children:"autofs"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Requires additional packages to be installed."}),"\n",(0,n.jsx)(s.li,{children:"Multi-part configuration files."}),"\n",(0,n.jsx)(s.li,{children:"May require scripts as helpers for mounting some filesystem."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.code,{children:"systemd.automount"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Integrated into ",(0,n.jsx)(s.code,{children:"systemd"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["Only available on ",(0,n.jsx)(s.code,{children:"systemd"})," distributions."]}),"\n",(0,n.jsxs)(s.li,{children:["Unified configuration files, uses ",(0,n.jsx)(s.code,{children:"/etc/fstab"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["Uses common ",(0,n.jsx)(s.code,{children:"systemd.mount"})," facilities, no scripts, but allows unit file overrides."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["With the ",(0,n.jsx)(s.code,{children:"systemd.automount"})," implementation, the actual unit configuration files are generated from the entries in ",(0,n.jsx)(s.code,{children:"/etc/fstab"}),". There are options to add to the ",(0,n.jsx)(s.code,{children:"/etc/fstab"})," to indicate to the ",(0,n.jsx)(s.code,{children:"systemd-fstab-generator"})," the entries are to be automounted. The ",(0,n.jsx)(s.code,{children:"systemd"})," unit files that are generated are located in the ",(0,n.jsx)(s.code,{children:"/run/systemd/generator"})," directory. The file names end in ",(0,n.jsx)(s.code,{children:"mount"})," and ",(0,n.jsx)(s.code,{children:"automount"}),". Like other ",(0,n.jsx)(s.code,{children:"systemd"})," files, they can be overridden by entries in the ",(0,n.jsx)(s.code,{children:"/etc/systemd/system"})," directory, but it is easier to just change the options in ",(0,n.jsx)(s.code,{children:"/etc/fstab"}),". The ",(0,n.jsx)(s.code,{children:"man"})," page for ",(0,n.jsx)(s.code,{children:"systemd.mount"})," has information on the options. Some examples from ",(0,n.jsx)(s.code,{children:"/etc/fstab"})," are provided below:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"127.0.0.1:/home/export/nfs /home/share/nfs nfs x-systemd.automount,x-systemd.idle-timeout=10,noauto,_netdev 0 0 //localhost/cifs-share /home/share/cifs cifs creds=/root/smbfile,x-systemd.automount,x-systemd.idle-timeout=10,noauto,_netdev 0 0\n"})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>d});var n=t(96540);const i={},o=n.createContext(i);function r(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);