"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[8098],{2674:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var t=n(74848),i=n(28453);const a={slug:"redis-cheatsheet",title:"Redis Cheatsheet",description:"Practical Redis CLI commands (access, inspect keys, monitoring, admin).",authors:["kgal-akl"],tags:["redis","cache","infrastructure","services","cheatsheet","cli","database"]},c=void 0,l={id:"software/database/redis",title:"Redis Cheatsheet",description:"Practical Redis CLI commands (access, inspect keys, monitoring, admin).",source:"@site/docs/software/database/redis.md",sourceDirName:"software/database",slug:"/software/database/redis-cheatsheet",permalink:"/docs/software/database/redis-cheatsheet",draft:!1,unlisted:!1,tags:[{inline:!0,label:"redis",permalink:"/docs/tags/redis"},{inline:!0,label:"cache",permalink:"/docs/tags/cache"},{inline:!0,label:"infrastructure",permalink:"/docs/tags/infrastructure"},{inline:!0,label:"services",permalink:"/docs/tags/services"},{inline:!0,label:"cheatsheet",permalink:"/docs/tags/cheatsheet"},{inline:!0,label:"cli",permalink:"/docs/tags/cli"},{inline:!0,label:"database",permalink:"/docs/tags/database"}],version:"current",frontMatter:{slug:"redis-cheatsheet",title:"Redis Cheatsheet",description:"Practical Redis CLI commands (access, inspect keys, monitoring, admin).",authors:["kgal-akl"],tags:["redis","cache","infrastructure","services","cheatsheet","cli","database"]},sidebar:"docsSidebar",previous:{title:"Oracle Database Cheatsheet",permalink:"/docs/software/database/oracledb-cheatsheet"},next:{title:"JFrog Artifactory Management",permalink:"/docs/software/infrastructure/artifactory/jfrog-artifactory-management"}},r={},d=[{value:"Access (<code>redis-cli</code>)",id:"access-redis-cli",level:2},{value:"TLS disabled",id:"tls-disabled",level:3},{value:"TLS enabled",id:"tls-enabled",level:3},{value:"List keys",id:"list-keys",level:2},{value:"List all keys (use carefully)",id:"list-all-keys-use-carefully",level:3},{value:"Iterate keys (preferred for production)",id:"iterate-keys-preferred-for-production",level:3},{value:"Inspect key details",id:"inspect-key-details",level:2},{value:"Get Value of String-type Key",id:"get-value-of-string-type-key",level:3},{value:"Get Value of List-type Key",id:"get-value-of-list-type-key",level:3},{value:"Get Value of Set-type Key",id:"get-value-of-set-type-key",level:3},{value:"Get Value of Sorted Set-type Key",id:"get-value-of-sorted-set-type-key",level:3},{value:"Get Value of Hash-type Key",id:"get-value-of-hash-type-key",level:3},{value:"Count keys",id:"count-keys",level:2},{value:"Total number of keys (by scanning)",id:"total-number-of-keys-by-scanning",level:3},{value:"Database info",id:"database-info",level:2},{value:"Switch Databases",id:"switch-databases",level:2},{value:"Delete Keys",id:"delete-keys",level:2},{value:"Persistence",id:"persistence",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Set Log Level",id:"set-log-level",level:3},{value:"Debugging",id:"debugging",level:2},{value:"Monitor",id:"monitor",level:3},{value:"Ping a Remote Redis Server",id:"ping-a-remote-redis-server",level:3},{value:"Check Latency",id:"check-latency",level:3},{value:"List Clients",id:"list-clients",level:3}];function o(e){const s={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.h2,{id:"access-redis-cli",children:["Access (",(0,t.jsx)(s.code,{children:"redis-cli"}),")"]}),"\n",(0,t.jsx)(s.h3,{id:"tls-disabled",children:"TLS disabled"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'redis-cli --pass "$REDIS_PASSWORD" --no-auth-warning\n'})}),"\n",(0,t.jsx)(s.h3,{id:"tls-enabled",children:"TLS enabled"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'redis-cli \\\n  --tls \\\n  --cert   /opt/app/cache/certs/tls.crt \\\n  --key    /opt/app/cache/certs/tls.key \\\n  --cacert /opt/app/cache/certs/ca.crt \\\n  --pass "$REDIS_PASSWORD" \\\n  --no-auth-warning\n'})}),"\n",(0,t.jsx)(s.h2,{id:"list-keys",children:"List keys"}),"\n",(0,t.jsx)(s.h3,{id:"list-all-keys-use-carefully",children:"List all keys (use carefully)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"KEYS *\n"})}),"\n",(0,t.jsx)(s.h3,{id:"iterate-keys-preferred-for-production",children:"Iterate keys (preferred for production)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"SCAN 0\n\nSCAN 0 MATCH user:* COUNT 100\n"})}),"\n",(0,t.jsx)(s.h2,{id:"inspect-key-details",children:"Inspect key details"}),"\n",(0,t.jsx)(s.p,{children:"Get the key type:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"TYPE <key>\n"})}),"\n",(0,t.jsx)(s.p,{children:"Then retrieve its value based on its type."}),"\n",(0,t.jsx)(s.h3,{id:"get-value-of-string-type-key",children:"Get Value of String-type Key"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"GET <key>\n"})}),"\n",(0,t.jsx)(s.h3,{id:"get-value-of-list-type-key",children:"Get Value of List-type Key"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"LRANGE <key> 0 -1\n"})}),"\n",(0,t.jsx)(s.h3,{id:"get-value-of-set-type-key",children:"Get Value of Set-type Key"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"SMEMBERS <key>\n"})}),"\n",(0,t.jsx)(s.h3,{id:"get-value-of-sorted-set-type-key",children:"Get Value of Sorted Set-type Key"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"ZRANGE <key> 0 -1 WITHSCORES\n"})}),"\n",(0,t.jsx)(s.h3,{id:"get-value-of-hash-type-key",children:"Get Value of Hash-type Key"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"HGETALL <key>\n"})}),"\n",(0,t.jsx)(s.h2,{id:"count-keys",children:"Count keys"}),"\n",(0,t.jsx)(s.h3,{id:"total-number-of-keys-by-scanning",children:"Total number of keys (by scanning)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'redis-cli --pass "$REDIS_PASSWORD" --no-auth-warning --scan | wc -l\n'})}),"\n",(0,t.jsx)(s.h2,{id:"database-info",children:"Database info"}),"\n",(0,t.jsx)(s.p,{children:"Check the number of keys in each Redis database:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"INFO keyspace\n\n# Keyspace\ndb0:keys=450,expires=12,avg_ttl=500000\ndb1:keys=200,expires=5,avg_ttl=300000\n"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"db0"})," has 450 keys, ",(0,t.jsx)(s.code,{children:"db1"})," has 200 keys.\nSome keys have expiration times."]}),"\n",(0,t.jsx)(s.h2,{id:"switch-databases",children:"Switch Databases"}),"\n",(0,t.jsxs)(s.p,{children:["If Redis has multiple databases (default: ",(0,t.jsx)(s.code,{children:"db0"}),"), to work with ",(0,t.jsx)(s.code,{children:"db0"})]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"SELECT 0\n"})}),"\n",(0,t.jsxs)(s.p,{children:["To switch to ",(0,t.jsx)(s.code,{children:"db1"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"SELECT 1\n"})}),"\n",(0,t.jsx)(s.h2,{id:"delete-keys",children:"Delete Keys"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"DEL <key>\n"})}),"\n",(0,t.jsx)(s.p,{children:"To delete all keys in the currently-selected database:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"FLUSHDB\n"})}),"\n",(0,t.jsx)(s.p,{children:"To delete all keys in Redis:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"FLUSHALL\n"})}),"\n",(0,t.jsxs)(s.p,{children:["We can also delete them in batches if we don't access/permission/ to ",(0,t.jsx)(s.code,{children:"FLUSHALL"})," or it's disabled:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'BATCH_SIZE=100\nredis-cli --tls \\\n--cert /opt/app/cache/certs/tls.crt \\\n--key /opt/app/cache/certs/tls.key \\\n--cacert /opt/app/cache/certs/ca.crt \\\n-a "$REDIS_PASSWORD" --no-auth-warning \\\n--scan | xargs -d \'\\n\' -L $BATCH_SIZE redis-cli --tls \\\n--cert /opt/app/cache/certs/tls.crt \\\n--key /opt/app/cache/certs/tls.key \\\n--cacert /opt/app/cache/certs/ca.crt \\\n-a "$REDIS_PASSWORD" --no-auth-warning DEL\n'})}),"\n",(0,t.jsx)(s.h2,{id:"persistence",children:"Persistence"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'redis-cli -a "$REDIS_PASSWORD" INFO persistence\nredis-cli -a "$REDIS_PASSWORD" CONFIG GET save\n'})}),"\n",(0,t.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(s.h3,{id:"set-log-level",children:"Set Log Level"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"CONFIG SET loglevel debug\n"})}),"\n",(0,t.jsx)(s.h2,{id:"debugging",children:"Debugging"}),"\n",(0,t.jsx)(s.h3,{id:"monitor",children:"Monitor"}),"\n",(0,t.jsxs)(s.p,{children:["Observe every operation (e.g. key set/get, ",(0,t.jsx)(s.code,{children:"HGETALL"}),", deletes):"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'redis-cli --pass "$REDIS_PASSWORD" --no-auth-warning MONITOR\n'})}),"\n",(0,t.jsx)(s.h3,{id:"ping-a-remote-redis-server",children:"Ping a Remote Redis Server"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'redis-cli --tls \\\n--cacert /opt/app/cache/certs/ca.crt \\\n--cert /opt/app/cache/certs/tls.crt \\\n--key /opt/app/cache/certs/tls.key \\\n-h $REMOTE_REDIS_HOST -p 6379 \\\n-a "$REDIS_PASS" PING\n'})}),"\n",(0,t.jsx)(s.h3,{id:"check-latency",children:"Check Latency"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'redis-cli -a "$REDIS_PASSWORD" LATENCY DOCTOR\nredis-cli -a "$REDIS_PASSWORD" SLOWLOG GET 128\n'})}),"\n",(0,t.jsx)(s.h3,{id:"list-clients",children:"List Clients"}),"\n",(0,t.jsx)(s.p,{children:"The command provides all the clients that communicated with the Redis server:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"redis-cli CLIENT LIST\n"})}),"\n",(0,t.jsxs)(s.p,{children:["It provides a file descriptor (",(0,t.jsx)(s.code,{children:"fd"}),") and an IP address/port of the client. It is very useful when there are connection/TLS issues and we see prints such as in the Redis server logs:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"Error accepting a client connection: error:0A000126:SSL routines::unexpected eof while reading (conn: fd=259)\n"})}),"\n",(0,t.jsxs)(s.p,{children:["We see here that the client got assigned ",(0,t.jsx)(s.code,{children:"fd=259"})," so we can use the command above to see the IP of that specific client belonging to that file descriptor."]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>l});var t=n(96540);const i={},a=t.createContext(i);function c(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);