"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[56869],{96721:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>c,toc:()=>d});var i=n(74848),r=n(28453);const t={},l="I/O Scheduling",c={id:"os/UNIX/System Monitoring/i_o_scheduling",title:"I/O Scheduling",description:"The I/O scheduler provides an interface with the Generic Block Layer, which is a kernel component that handles the requests for all block devices in the system.",source:"@site/docs/os/UNIX/System Monitoring/i_o_scheduling.md",sourceDirName:"os/UNIX/System Monitoring",slug:"/os/UNIX/System Monitoring/i_o_scheduling",permalink:"/docs/os/UNIX/System Monitoring/i_o_scheduling",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"I/O Monitoring",permalink:"/docs/os/UNIX/System Monitoring/i_o"},next:{title:"System and Kernel Log Files",permalink:"/docs/os/UNIX/System Monitoring/important_log_files"}},o={},d=[{value:"Types of Schedulers",id:"types-of-schedulers",level:2}];function h(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"io-scheduling",children:"I/O Scheduling"})}),"\n",(0,i.jsxs)(s.p,{children:["The I/O scheduler provides an interface with the ",(0,i.jsx)(s.strong,{children:"Generic Block Layer"}),", which is a kernel component that handles the requests for all block devices in the system."]}),"\n",(0,i.jsxs)(s.p,{children:["A ",(0,i.jsx)(s.strong,{children:"block device"})," reads and writes 'blocks' of data to and from the hardware (usually a hard disk)."]}),"\n",(0,i.jsxs)(s.p,{children:["Both the ",(0,i.jsx)(s.strong,{children:"Virtual Memory (VM)"})," and ",(0,i.jsx)(s.strong,{children:"Virtual File System(VFS)"})," layers submit requests to block devices."]}),"\n",(0,i.jsx)(s.p,{children:"The scheduling scheme is loaded at kernel boot."}),"\n",(0,i.jsx)(s.p,{children:"To view the available schedulers:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Selected is cfq scheduler\ncat /sys/block/sda/queue/scheduler\nnoop deadline [cfq]\n"})}),"\n",(0,i.jsx)(s.p,{children:"To change the value:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"echo deadline > /sys/block/sda/queue/scheduler\n"})}),"\n",(0,i.jsx)(s.h2,{id:"types-of-schedulers",children:"Types of Schedulers"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Completely Fair Queue (",(0,i.jsx)(s.code,{children:"cfq"}),")"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"spreads i/o bandwidth equally across all processes submitting requests."}),"\n",(0,i.jsx)(s.li,{children:"there are 64 dispatch queues which receive requests."}),"\n",(0,i.jsx)(s.li,{children:"requests are read from all queues in round-robin and in FIFO per queue."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"deadline"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"aggressively reorders requests to prevent large latencies and improve overall performance."}),"\n",(0,i.jsx)(s.li,{children:"the kernel associates a deadline for every request."}),"\n",(0,i.jsx)(s.li,{children:"has 5 queues:"}),"\n",(0,i.jsx)(s.li,{children:"2 sorted lists (1 for reading, 1 for writing) and are arranged by the starting block."}),"\n",(0,i.jsxs)(s.li,{children:["2 FIFO lists (1 for ",(0,i.jsx)(s.code,{children:"r"}),", 1 for ",(0,i.jsx)(s.code,{children:"w"}),") and are sorted by submission time."]}),"\n",(0,i.jsx)(s.li,{children:"dispatch queue which contains requests to be sent into the device driver."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"http://books.gigatux.nl/mirror/kerneldevelopment/0672327201/images/0672327201/graphics/13fig03.gif",alt:"schedulers"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["We can tune the specifics of the scheduler by modifying different configurations in ",(0,i.jsx)(s.code,{children:"/sys/block/sda/queue/iosched"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["To check whether the device is SSD (",(0,i.jsx)(s.code,{children:"0"})," is SSD):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"cat /sys/block/$device/queue/rotational\n"})})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>c});var i=n(96540);const r={},t=i.createContext(r);function l(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);