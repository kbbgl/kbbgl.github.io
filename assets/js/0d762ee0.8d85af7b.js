"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[62488],{6438:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>a});var t=s(74848),i=s(28453);const o={slug:"os-linux-filesystem-mounting",title:"Mounting Filesystems",authors:["kbbgl"],tags:["os","linux","filesystem","mounting"]},l="Mounting Filesystems",r={id:"os/linux/filesystem/mounting",title:"Mounting Filesystems",description:"To be able to use a filesystem after creation, we need to mount it somewhere within the tree structure in a child directory within the / directory.",source:"@site/docs/os/linux/filesystem/mounting.md",sourceDirName:"os/linux/filesystem",slug:"/os/linux/filesystem/os-linux-filesystem-mounting",permalink:"/docs/os/linux/filesystem/os-linux-filesystem-mounting",draft:!1,unlisted:!1,tags:[{inline:!0,label:"os",permalink:"/docs/tags/os"},{inline:!0,label:"linux",permalink:"/docs/tags/linux"},{inline:!0,label:"filesystem",permalink:"/docs/tags/filesystem"},{inline:!0,label:"mounting",permalink:"/docs/tags/mounting"}],version:"current",frontMatter:{slug:"os-linux-filesystem-mounting",title:"Mounting Filesystems",authors:["kbbgl"],tags:["os","linux","filesystem","mounting"]},sidebar:"docsSidebar",previous:{title:"LVM (Logical Volume Management)",permalink:"/docs/os/linux/filesystem/os-linux-filesystem-lvm"},next:{title:"Output to File and STDOUT",permalink:"/docs/os/linux/filesystem/os-linux-filesystem-output-to-file-and-console"}},c={},a=[{value:"Mounting at Boot and <code>/etc/fstab</code>",id:"mounting-at-boot-and-etcfstab",level:2},{value:"Checking Filesystem for Errors",id:"checking-filesystem-for-errors",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"mounting-filesystems",children:"Mounting Filesystems"})}),"\n",(0,t.jsxs)(n.p,{children:["To be able to use a filesystem after creation, we need to mount it somewhere within the tree structure in a child directory within the ",(0,t.jsx)(n.code,{children:"/"})," directory."]}),"\n",(0,t.jsx)(n.p,{children:"To be able to mount a filesystem, we first need to create a directory."}),"\n",(0,t.jsx)(n.p,{children:"Then we can mount it."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir /home/mount_point\nsudo mount -t ext /dev/sdb4 /home/mount_point\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will mount a ",(0,t.jsx)(n.code,{children:"ext4"})," filesystem on the partition ",(0,t.jsx)(n.code,{children:"/dev/sdb4"})," into mount point ",(0,t.jsx)(n.code,{children:"/home/mount_point"}),". Any files residing in ",(0,t.jsx)(n.code,{children:"/home/mount_point"})," will be hidden until ",(0,t.jsx)(n.code,{children:"umount"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"We can unmount the filesystem:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo umount /home/mount_point\n# OR\nsudo umount /dev/sdb4\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This needs to be done only on filesystems not currently running/in use (",(0,t.jsx)(n.code,{children:"device is busy"}),")."]}),"\n",(0,t.jsx)(n.p,{children:"We can create and mount a filesystem:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create a fs full of zeros\n# read/write 1M at a time\n# and copy 512 input blocks\ndd if=/dev/zero of=/tmp/zeros bs=1M count=512\n\n# Load XFS filesystem\nsudo /sbin/mkfs.xfs /tmp/zeros\n\n# OR\nsudo mkfs -t xfs /tmp/zeros\n\n# Mount the filesystem \nsudo mount /tmp/zeros /mnt\n"})}),"\n",(0,t.jsx)(n.p,{children:"We can see that the filesystem is mounted:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"lsmod | grep xfs\n\nModule                  Size  Used by\nxfs                  1204224  1\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"mounting-at-boot-and-etcfstab",children:["Mounting at Boot and ",(0,t.jsx)(n.code,{children:"/etc/fstab"})]}),"\n",(0,t.jsx)(n.p,{children:"During system initialization, the following command is executed:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mount -a\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This mounts all filesystems listed in ",(0,t.jsx)(n.code,{children:"/etc/fstab"})," configuration file.\nIt is also popular to use ",(0,t.jsx)(n.code,{children:"autofs"})," or ",(0,t.jsx)(n.code,{children:"automount"})," tools to automatically mount filesystems."]}),"\n",(0,t.jsx)(n.h2,{id:"checking-filesystem-for-errors",children:"Checking Filesystem for Errors"}),"\n",(0,t.jsxs)(n.p,{children:["Every filesyste has a utility designed to check and fix errors. The generic name is ",(0,t.jsx)(n.code,{children:"fsck"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"fsck [-t fstype] [options] [device-file] [-a] [-r]\n\n# using -r will prompt fixing issue one by one\n# using -a the issues will be fixed automatically\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"fsck"})," should only be run on an unmounted filesystem."]}),"\n",(0,t.jsx)(n.p,{children:"We can use the following to force filesystem check of all mounted filesystems upon reboot:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo touch /forcefsck #file will dissappear after a successful check.\nsudo reboot\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>r});var t=s(96540);const i={},o=t.createContext(i);function l(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);