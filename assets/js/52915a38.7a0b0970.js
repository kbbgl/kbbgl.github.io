"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[495],{90745:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>a});var r=n(74848),o=n(28453);const i={},c="Tools",t={id:"os/UNIX/System Monitoring/general",title:"Tools",description:"Network",source:"@site/docs/os/UNIX/System Monitoring/general.md",sourceDirName:"os/UNIX/System Monitoring",slug:"/os/UNIX/System Monitoring/general",permalink:"/docs/os/UNIX/System Monitoring/general",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Display Command History",permalink:"/docs/os/UNIX/System Monitoring/display_command_history_with_timestamp"},next:{title:"I/O Monitoring",permalink:"/docs/os/UNIX/System Monitoring/i_o"}},l={},a=[{value:"Network",id:"network",level:2},{value:"I/O",id:"io",level:2},{value:"Memory",id:"memory",level:2},{value:"Process and Load",id:"process-and-load",level:2},{value:"Logs",id:"logs",level:2},{value:"Systems Activity Report (<code>sar</code>)",id:"systems-activity-report-sar",level:2},{value:"Process Monitoring",id:"process-monitoring",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"tools",children:"Tools"})}),"\n",(0,r.jsx)(s.h2,{id:"network",children:"Network"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"iptraf\n"})}),"\n",(0,r.jsx)(s.h2,{id:"io",children:"I/O"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"iostat\nsar\nvmstat\n"})}),"\n",(0,r.jsx)(s.h2,{id:"memory",children:"Memory"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"free\npmap\n"})}),"\n",(0,r.jsx)(s.h2,{id:"process-and-load",children:"Process and Load"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"pstree\nmpstat # multiprocessor statistics\nnumastat\nstrace # process system calls\n"})}),"\n",(0,r.jsx)(s.p,{children:"We can create stress on system by running:"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"https://wiki.ubuntu.com/Kernel/Reference/stress-ng",children:"stress"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# 8 cpu-intensive processes\n# 4 I/O intensive processes \n# 6 memory-intensive processes \n# allocating 256 MB by default.  \n# The size can bechanged as in--vm-bytes 128M.\u2022  \n# Run the stress test for 20 seconds.\n\nstress-ng -c 8 -i 4 -m 6 -t 20s\n"})}),"\n",(0,r.jsx)(s.h2,{id:"logs",children:"Logs"}),"\n",(0,r.jsxs)(s.p,{children:["System logs located in ",(0,r.jsx)(s.code,{children:"/var/log"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"rsyslogd"})," and ",(0,r.jsx)(s.code,{children:"journalctl"})," are used to interact with system logs."]}),"\n",(0,r.jsx)(s.p,{children:"To view system logs:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"\ntail -f /var/log/messages\ntail -f /var/log/syslog\n\n# OR\ndmesg -w\n"})}),"\n",(0,r.jsx)(s.p,{children:"Important logs:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"boot.log"})," - system boot messages"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"dmesg"})," - kernel messages after boot"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"messages.log"}),"/",(0,r.jsx)(s.code,{children:"syslog.log"})," - all important system messages."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"secure"})," - security related messages."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Files are rotated using ",(0,r.jsx)(s.code,{children:"logrotate"})," (configuration in ",(0,r.jsx)(s.code,{children:"/etc/logrotate.conf"}),"."]}),"\n",(0,r.jsxs)(s.h2,{id:"systems-activity-report-sar",children:["Systems Activity Report (",(0,r.jsx)(s.code,{children:"sar"}),")"]}),"\n",(0,r.jsxs)(s.p,{children:["Backend of ",(0,r.jsx)(s.code,{children:"sar"})," is System Activity Data Collector (",(0,r.jsx)(s.code,{children:"sadc"}),"). ",(0,r.jsx)(s.code,{children:"sadc"})," collects and accumulates info  and stores it in ",(0,r.jsx)(s.code,{children:"/var/log/sa"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"\nsudo sar [options] [interval] [count]\n\n# CPU information, every 3 seconds for 3 times\nsudo sar 3 3 \n\n# All information every 2 seconds\nsudo sar -A 2\n"})}),"\n",(0,r.jsxs)(s.p,{children:["All commands can be found ",(0,r.jsx)(s.a,{href:"https://cmdref.net/os/linux/command/sar.html",children:"here"})]}),"\n",(0,r.jsxs)(s.p,{children:["We can use the ",(0,r.jsx)(s.a,{href:"https://sourceforge.net/projects/ksar/",children:(0,r.jsx)(s.code,{children:"ksar"})})," to generate graphs from ",(0,r.jsx)(s.code,{children:"sar"})," data."]}),"\n",(0,r.jsx)(s.h2,{id:"process-monitoring",children:"Process Monitoring"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.code,{children:"ps"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'ps auxf # will show ancestry\nps -elf\nps -eL\nps -C "bash"\n\n# Choose columns\nps -o pid,cputime,command\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Commands which are in ",(0,r.jsx)(s.code,{children:"[]"})," are threads. and exist only within the kernel."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"VSZ"})," - process virtual size in KB"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"RSS"})," - resident set size. Non-swapped memory a task is using in KB."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"STAT"})," - State of the process."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.code,{children:"pstree"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"pstree -aAp 2408\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>t});var r=n(96540);const o={},i=r.createContext(o);function c(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);