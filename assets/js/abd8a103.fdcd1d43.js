"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[37935],{61446:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var t=n(74848),i=n(28453);const o={slug:"os-linux-filesystem-swap",title:"Swap",authors:["kbbgl"],tags:["os","linux","filesystem","swap"]},a="Swap",l={id:"os/linux/filesystem/swap",title:"Swap",description:"Linux employs a virtual memory system that allows it to function as if it had more memory than it physically has. Overcommiting functions two ways:",source:"@site/docs/os/linux/filesystem/swap.md",sourceDirName:"os/linux/filesystem",slug:"/os/linux/filesystem/os-linux-filesystem-swap",permalink:"/docs/os/linux/filesystem/os-linux-filesystem-swap",draft:!1,unlisted:!1,tags:[{inline:!0,label:"os",permalink:"/docs/tags/os"},{inline:!0,label:"linux",permalink:"/docs/tags/linux"},{inline:!0,label:"filesystem",permalink:"/docs/tags/filesystem"},{inline:!0,label:"swap",permalink:"/docs/tags/swap"}],version:"current",frontMatter:{slug:"os-linux-filesystem-swap",title:"Swap",authors:["kbbgl"],tags:["os","linux","filesystem","swap"]},sidebar:"docsSidebar",previous:{title:"Output to File and STDOUT",permalink:"/docs/os/linux/filesystem/os-linux-filesystem-output-to-file-and-console"},next:{title:"Kernel",permalink:"/docs/os/linux/kernel/os-linux-kernel-kernel"}},r={},c=[];function p(e){const s={code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"swap",children:"Swap"})}),"\n",(0,t.jsx)(s.p,{children:"Linux employs a virtual memory system that allows it to function as if it had more memory than it physically has. Overcommiting functions two ways:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Programs (such as ones that have child processes that they inherit from parent using COW) don't always use all allocated memory."}),"\n",(0,t.jsx)(s.li,{children:"Less active memory regions are moved to disk when memory becomes low on the system."}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Swapping is usually done on dedicated partitions or files. ",(0,t.jsx)(s.strong,{children:"The recommended swap size is the total RAM on the system"}),". The kernel  memory is never swapped out."]}),"\n",(0,t.jsx)(s.p,{children:"We can see how much swap area the system is using:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cat /proc/swaps\n\nfree -m\n"})}),"\n",(0,t.jsx)(s.p,{children:"Other commands:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# format swap partition/file\nmkswap\n\n# activate swap partition/file\nswapon\n\n# deactivate swap partition/file\nswapoff\n"})}),"\n",(0,t.jsx)(s.p,{children:"Full procedure to create add swap:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Create fs\ndd if=/dev/zero of=swpfile bs=1M count=1024\n\n# change ownership of `swpfile# to root\nsudo chown root:root swpfile\n\n# activate swap\nsudo swapon swpfile\n\n# check it exists\ncat /proc/swapfile\nFilename    Type  Size Used Priority\n/home/app/lfs201/fs/swpfile         file  1048572 512 -2\n\n# deactivate and remove swap\nsudo swapoff swpfile\nsudo rm swpfile\n"})})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>l});var t=n(96540);const i={},o=t.createContext(i);function a(e){const s=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);