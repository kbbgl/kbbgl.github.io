"use strict";(self.webpackChunkkgkb=self.webpackChunkkgkb||[]).push([[58244],{13699:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var o=t(74848),i=t(28453);const s={slug:"fixing-ubuntu-hibernation",title:"Fixing Ubuntu Hibernation",authors:["kbbgl"],tags:["ubuntu","boot","hibernation","raspberry_pi","swap","fs"]},a=void 0,r={permalink:"/blog/fixing-ubuntu-hibernation",source:"@site/blog/fixing-ubuntu-hibernation.md",title:"Fixing Ubuntu Hibernation",description:"Introduction",date:"2025-03-28T23:36:25.000Z",tags:[{inline:!1,label:"Ubuntu",permalink:"/blog/tags/ubuntu"},{inline:!1,label:"Boot",permalink:"/blog/tags/boot"},{inline:!1,label:"Hibernation",permalink:"/blog/tags/hibernation"},{inline:!1,label:"Raspberry_pi",permalink:"/blog/tags/raspberry-pi"},{inline:!1,label:"Swap",permalink:"/blog/tags/swap"},{inline:!1,label:"Fs",permalink:"/blog/tags/fs"}],readingTime:2.455,hasTruncateMarker:!0,authors:[{name:"Kobbi Gal",title:"I like to pick things apart and see how they work inside",url:"https://github.com/kbbgl",imageURL:"https://avatars.githubusercontent.com/u/14372649",key:"kbbgl",page:null}],frontMatter:{slug:"fixing-ubuntu-hibernation",title:"Fixing Ubuntu Hibernation",authors:["kbbgl"],tags:["ubuntu","boot","hibernation","raspberry_pi","swap","fs"]},unlisted:!1,prevItem:{title:"How To Set Up Dotless Email Validation in Swagger",permalink:"/blog/dotless-email-regex-validation-swagger"},nextItem:{title:"How to Run a Sequential gulp.js Task using\xa0PowerShell",permalink:"/blog/gulpjs-task-using-powershell"}},l={authorsImageUrls:[void 0]},c=[{value:"Introduction",id:"introduction",level:2},{value:"Boot No Good",id:"boot-no-good",level:2},{value:"Who are you <code>zz-resume-auto</code>?",id:"who-are-you-zz-resume-auto",level:3}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsxs)(n.p,{children:["One day, seemingly out of the blue, my (using ",(0,o.jsx)(n.a,{href:"https://docusaurus.io/",children:"Docusaurus"})," blog site, which is set up as an Ubuntu ",(0,o.jsx)(n.code,{children:"systemd"})," service on the Raspberry Pi 4, stopped being accessible."]}),"\n",(0,o.jsx)(n.p,{children:"I tried pinging it and checking whether is it was connected to my local network but it was nowhere to be found. This meant that I needed to physically access the Raspberry Pi so I connected it to a monitor and reset it."}),"\n",(0,o.jsx)(n.h2,{id:"boot-no-good",children:"Boot No Good"}),"\n",(0,o.jsx)(n.p,{children:'Upon reboot, I was greeted by a console with the following worrying "Kernel panic" message:'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'/init: conf/conf.d/zz-resume-auto: line 1: syntax error: unexpected "{" \n[ 1.344964] Kernel panic - not syncing: Attempted to kill mitt exitcode=0x00000200 \n[ 1.352769] CPU: 0 PID: 1 Comm: init Not tainted 5.19.0-1011-raspi #18-Ubuntu\n[ 1.360029] Hardware name: Raspberry Pi 4 Model B Rev 1.4 (DT)\n[ 1.365959] Call trace:\n[ 1.368442]  dump_backtrace+Oxbc/Ox124\n[ 1.372260]  show_stackoN20/0x5c\n[ 1.375625]  dump stack_lul4x88/Oxb4\n[ 1.379349]  dump stack4x18/004\n[ 1.382714]  panic\u2022Ox1b4/00ac\n[ 1.385816]  do exit\u2022ex518/0x520\n[ 1.389095]  do_group_exit4x3c/OxbO\n[ 1.392726]  __Nake_gp_parent+Ox0/0x40\n[ 1.396534]  inuoke_syscall4x50/0x120\n[ 1.400343]  el6_suc_common.constprop.04.0x6c/Ox1a0\n[ 1.405211]  do ele_suc+004/0x44\n[ 1.400577]  elesuc+040/0x180\n[ 1.411768]  elOt_64_sync_handler+Oxf4/0x120\n[ 1.416106]  elOt_64_sync+Ox1a0/0x1A4\n[ 1.419026] SNP: stopping secondary CPUs\n[ 1.423813] Kernel Offset: Ox4b0c05400000 from Oxffff800008000000\n[ 1.430004] PHYS_OFFSET: Oxffffd932c0000000 \n[ 1.434250] CPU features: Ox2000,04027810,00001086\n[ 1.439117] Memory Limit: none\n[ 1.442221] ---[ end Kernel panic - not syncing: Attempted to kill init! exitcode=0x00000200 ]--- \n'})}),"\n",(0,o.jsxs)(n.p,{children:["The first line was the one that stood out. Seems that the file ",(0,o.jsx)(n.code,{children:"zz-resume-auto"})," has a problem with the curly brackets within that context. At this time, I had to figure out a couple of things:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["What is this file ",(0,o.jsx)(n.code,{children:"zz-resume-auto"}),"?"]}),"\n",(0,o.jsx)(n.li,{children:"Who writes to this file?"}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"who-are-you-zz-resume-auto",children:["Who are you ",(0,o.jsx)(n.code,{children:"zz-resume-auto"}),"?"]}),"\n",(0,o.jsx)(n.p,{children:"Since I couldn't access the Raspberry Pi remotely, I had to somehow be able to access it's filesystem without it booting. Since the Raspberry Pi's storage comes in a form of an SD card, I could just pull out the SD card from the slot on the Raspberry Pi, mount it onto an adapter and connect it to another computer."}),"\n",(0,o.jsx)(n.p,{children:"After inserting the SD card adapter to one of the USB slots on my other machine, I ran the following command to create a directory for the Raspberry Pi filesystem and mounted the SD card onto it:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# find the disk\n> fdisk -l\n\nDisk /dev/sda: 59.48 GiB, 63864569856 bytes, 124735488 sectors\nDisk model: Card  Reader\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0x44eba349\n\nDevice     Boot  Start       End   Sectors  Size Id Type\n/dev/sda1  *      2048    526335    524288  256M  c W95 FAT32 (LBA)\n/dev/sda2       526336 124735454 124209119 59.2G 83 Linux\n\n\n> mkdir /media/rpi/\n\n> mount /dev/sda1/ /media/rpi\n\n> ls /media/rpi\nbin   dev  home  lost+found  mnt  proc  run   snap  sys  usr\nboot  etc  lib   media       opt  root  sbin  srv   tmp  var\n"})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var o=t(96540);const i={},s=o.createContext(i);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);