"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[34283],{85066:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});var i=n(74848),o=n(28453);const r={slug:"unix-sys-monitoring",title:"UNIX System Monitoring",authors:["kbbgl"],tags:["unix","linux","monitoring","syslog"]},l="Tools",t={id:"os/linux/system_monitoring/general",title:"UNIX System Monitoring",description:"Network",source:"@site/docs/os/linux/system_monitoring/general.md",sourceDirName:"os/linux/system_monitoring",slug:"/os/linux/system_monitoring/unix-sys-monitoring",permalink:"/docs/os/linux/system_monitoring/unix-sys-monitoring",draft:!1,unlisted:!1,tags:[{inline:!0,label:"unix",permalink:"/docs/tags/unix"},{inline:!0,label:"linux",permalink:"/docs/tags/linux"},{inline:!0,label:"monitoring",permalink:"/docs/tags/monitoring"},{inline:!0,label:"syslog",permalink:"/docs/tags/syslog"}],version:"current",frontMatter:{slug:"unix-sys-monitoring",title:"UNIX System Monitoring",authors:["kbbgl"],tags:["unix","linux","monitoring","syslog"]},sidebar:"docsSidebar",previous:{title:"Display Command History",permalink:"/docs/os/linux/system_monitoring/os-linux-system-monitoring-display-command-history-with-timestamp"},next:{title:"I/O Monitoring",permalink:"/docs/os/linux/system_monitoring/os-linux-system-monitoring-i-o"}},c={},a=[{value:"Network",id:"network",level:2},{value:"I/O",id:"io",level:2},{value:"Memory",id:"memory",level:2},{value:"Process and Load",id:"process-and-load",level:2},{value:"Logs",id:"logs",level:2},{value:"Send Test Message to Syslog Server",id:"send-test-message-to-syslog-server",level:3},{value:"UDP",id:"udp",level:4},{value:"TCP",id:"tcp",level:4},{value:"TLS",id:"tls",level:4},{value:"Systems Activity Report (<code>sar</code>)",id:"systems-activity-report-sar",level:2},{value:"Process Monitoring",id:"process-monitoring",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"tools",children:"Tools"})}),"\n",(0,i.jsx)(s.h2,{id:"network",children:"Network"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"iptraf\n"})}),"\n",(0,i.jsx)(s.h2,{id:"io",children:"I/O"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"iostat\nsar\nvmstat\n"})}),"\n",(0,i.jsx)(s.h2,{id:"memory",children:"Memory"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"free\npmap\n"})}),"\n",(0,i.jsx)(s.h2,{id:"process-and-load",children:"Process and Load"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"pstree\nmpstat # multiprocessor statistics\nnumastat\nstrace # process system calls\n"})}),"\n",(0,i.jsx)(s.p,{children:"We can create stress on system by running:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"https://wiki.ubuntu.com/Kernel/Reference/stress-ng",children:"stress"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# 8 cpu-intensive processes\n# 4 I/O intensive processes \n# 6 memory-intensive processes \n# allocating 256 MB by default.  \n# The size can bechanged as in--vm-bytes 128M.\u2022  \n# Run the stress test for 20 seconds.\n\nstress-ng -c 8 -i 4 -m 6 -t 20s\n"})}),"\n",(0,i.jsx)(s.h2,{id:"logs",children:"Logs"}),"\n",(0,i.jsxs)(s.p,{children:["System logs located in ",(0,i.jsx)(s.code,{children:"/var/log"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"rsyslogd"})," and ",(0,i.jsx)(s.code,{children:"journalctl"})," are used to interact with system logs."]}),"\n",(0,i.jsx)(s.p,{children:"To view system logs:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"\ntail -f /var/log/messages\ntail -f /var/log/syslog\n\n# OR\ndmesg -w\n"})}),"\n",(0,i.jsx)(s.p,{children:"Important logs:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"boot.log"})," - system boot messages"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"dmesg"})," - kernel messages after boot"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"messages.log"}),"/",(0,i.jsx)(s.code,{children:"syslog.log"})," - all important system messages."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"secure"})," - security related messages."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Files are rotated using ",(0,i.jsx)(s.code,{children:"logrotate"})," (configuration in ",(0,i.jsx)(s.code,{children:"/etc/logrotate.conf"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"send-test-message-to-syslog-server",children:"Send Test Message to Syslog Server"}),"\n",(0,i.jsx)(s.h4,{id:"udp",children:"UDP"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'echo "<134>1 2026-02-25T20:00:00Z kbbgl-test dummy - - - hello from udp" | nc -u -w1 $SYSLOG_SERVER_IP $SYSLOG_SERVER_PORT\n'})}),"\n",(0,i.jsx)(s.h4,{id:"tcp",children:"TCP"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'echo "<134>1 2026-02-25T20:00:00Z kbbgl-test dummy - - - hello from tcp" | nc -w3 $SYSLOG_SERVER_IP $SYSLOG_SERVER_PORT\n'})}),"\n",(0,i.jsx)(s.h4,{id:"tls",children:"TLS"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"openssl s_client -connect $SYSLOG_SERVER_IP:$SYSLOG_SERVER_PORT -quiet <<'EOF'\n<134>1 2026-02-25T20:00:00Z kbbgl-test dummy - - - hello from tls\nEOF\n"})}),"\n",(0,i.jsxs)(s.h2,{id:"systems-activity-report-sar",children:["Systems Activity Report (",(0,i.jsx)(s.code,{children:"sar"}),")"]}),"\n",(0,i.jsxs)(s.p,{children:["Backend of ",(0,i.jsx)(s.code,{children:"sar"})," is System Activity Data Collector (",(0,i.jsx)(s.code,{children:"sadc"}),"). ",(0,i.jsx)(s.code,{children:"sadc"})," collects and accumulates info  and stores it in ",(0,i.jsx)(s.code,{children:"/var/log/sa"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"\nsudo sar [options] [interval] [count]\n\n# CPU information, every 3 seconds for 3 times\nsudo sar 3 3 \n\n# All information every 2 seconds\nsudo sar -A 2\n"})}),"\n",(0,i.jsxs)(s.p,{children:["All commands can be found ",(0,i.jsx)(s.a,{href:"https://cmdref.net/os/linux/command/sar.html",children:"here"})]}),"\n",(0,i.jsxs)(s.p,{children:["We can use the ",(0,i.jsx)(s.a,{href:"https://sourceforge.net/projects/ksar/",children:(0,i.jsx)(s.code,{children:"ksar"})})," to generate graphs from ",(0,i.jsx)(s.code,{children:"sar"})," data."]}),"\n",(0,i.jsx)(s.h2,{id:"process-monitoring",children:"Process Monitoring"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"ps"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'ps auxf # will show ancestry\nps -elf\nps -eL\nps -C "bash"\n\n# Choose columns\nps -o pid,cputime,command\n'})}),"\n",(0,i.jsxs)(s.p,{children:["Commands which are in ",(0,i.jsx)(s.code,{children:"[]"})," are threads. and exist only within the kernel."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"VSZ"})," - process virtual size in KB"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"RSS"})," - resident set size. Non-swapped memory a task is using in KB."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"STAT"})," - State of the process."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"pstree"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"pstree -aAp 2408\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>t});var i=n(96540);const o={},r=i.createContext(o);function l(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);