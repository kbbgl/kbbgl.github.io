"use strict";(globalThis.webpackChunkkgkb=globalThis.webpackChunkkgkb||[]).push([[9649],{96639:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var i=s(74848),r=s(28453);const o={},t="Controlling File and Directory Permissions",c={id:"os/UNIX/Account Management/Controlling_File_Directory_PERMISSIONS",title:"Controlling File and Directory Permissions",description:"Granting ownership to specific user",source:"@site/docs/os/UNIX/Account Management/Controlling_File_Directory_PERMISSIONS.md",sourceDirName:"os/UNIX/Account Management",slug:"/os/UNIX/Account Management/Controlling_File_Directory_PERMISSIONS",permalink:"/docs/os/UNIX/Account Management/Controlling_File_Directory_PERMISSIONS",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Electronic Theory",permalink:"/docs/hardware/electronics/electrical-theory"},next:{title:"Environmental Variable Management",permalink:"/docs/os/UNIX/Account Management/Managing_User_Environmental_Variables"}},a={},l=[{value:"Granting ownership to specific user",id:"granting-ownership-to-specific-user",level:2},{value:"Granting ownership to specific group",id:"granting-ownership-to-specific-group",level:2},{value:"Checking permissions",id:"checking-permissions",level:2},{value:"Changing Permissions",id:"changing-permissions",level:3},{value:"Changing Default Permissions",id:"changing-default-permissions",level:3},{value:"SUID/SGID bits",id:"suidsgid-bits",level:3}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"controlling-file-and-directory-permissions",children:"Controlling File and Directory Permissions"})}),"\n",(0,i.jsx)(n.h2,{id:"granting-ownership-to-specific-user",children:"Granting ownership to specific user"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod $USER $FILE\nchmod kg /etc/hosts\n"})}),"\n",(0,i.jsx)(n.h2,{id:"granting-ownership-to-specific-group",children:"Granting ownership to specific group"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chgrp $GROUP $FILE\n"})}),"\n",(0,i.jsx)(n.h2,{id:"checking-permissions",children:"Checking permissions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ls -l /path/to/dir\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Taking an example value of ",(0,i.jsx)(n.code,{children:"drwxrwxrwx+"}),", the meaning of each character is explained in the following tables:"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"d"}),'\nThe file type, technically not part of its permissions. See info ls -n "What information is listed" for an explanation of the possible values.']}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rwx"}),"\nThe permissions that the owner has over the file."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rwx"}),"\nThe permissions that the group has over the file."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rwx"}),"\nThe permissions that all the other users have over the file."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"+"})," A single character that specifies whether an alternate access method applies to the file. When this character is a space, there is no alternate access method. A . character indicates a file with a security context, but no other alternate access method. A file with any other combination of alternate access methods is marked with a + character, for example in the case of ",(0,i.jsx)(n.strong,{children:"Access Control Lists"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"changing-permissions",children:"Changing Permissions"}),"\n",(0,i.jsxs)(n.p,{children:["Only the file owner or ",(0,i.jsx)(n.code,{children:"root"})," can change permissions."]}),"\n",(0,i.jsxs)(n.p,{children:["Can be changed using digits:\n",(0,i.jsx)(n.img,{src:"https://danielmiessler.com/images/permissions.png",alt:"alt"})]}),"\n",(0,i.jsxs)(n.p,{children:["Or using ",(0,i.jsx)(n.code,{children:"UGO"})," (user, group, other):"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"+"})," - add permission\n",(0,i.jsx)(n.code,{children:"-"})," - removes permission\n",(0,i.jsx)(n.code,{children:"="})," - sets permission"]}),"\n",(0,i.jsxs)(n.p,{children:["Remove permission for user ",(0,i.jsx)(n.code,{children:"u"})," for file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod u-w /etc/hosts\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Remove permission for group ",(0,i.jsx)(n.code,{children:"g"})," for file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod g-w /etc/hosts\n"})}),"\n",(0,i.jsx)(n.h3,{id:"changing-default-permissions",children:"Changing Default Permissions"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"unmask"})," takes the Linux base permissions and ",(0,i.jsx)(n.em,{children:"subtracts"})," the ",(0,i.jsx)(n.code,{children:"unmask"})," values to set the default permissions."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://www.computernetworkingnotes.org/images/linux/rhce-study-guide/ls22-c-1-calculate-default-permisison.png",alt:""})}),"\n",(0,i.jsxs)(n.p,{children:["Each user can set a personal default umask value for the files and directories in their personal ",(0,i.jsx)(n.code,{children:"~/.profile"})," file. To see the current value when logged on as the user, simply enter the command ",(0,i.jsx)(n.code,{children:"umask"})," and note what is returned."]}),"\n",(0,i.jsx)(n.h3,{id:"suidsgid-bits",children:"SUID/SGID bits"}),"\n",(0,i.jsxs)(n.p,{children:["We can grant temporary ",(0,i.jsx)(n.code,{children:"root"})," access to a user or group by setting the appropriate bit."]}),"\n",(0,i.jsxs)(n.p,{children:["To set the SUID bit, add a ",(0,i.jsx)(n.code,{children:"4"})," to the beginning of the permission:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod 4644 /path/to/file\n"})}),"\n",(0,i.jsxs)(n.p,{children:["To set the SGID bit, add a ",(0,i.jsx)(n.code,{children:"2"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod 2644 /path/to/file\n"})}),"\n",(0,i.jsx)(n.p,{children:"We can look for all files that have these bits set:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"find / -user root -perm 4000\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"find / -user root -perm 2000\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When the SUID bit is set, we will see it as an ",(0,i.jsx)(n.code,{children:"s"})," instead of ",(0,i.jsx)(n.code,{children:"x"})," when checking the permission of the file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"-rwxr-xr-x 1 root root 26696 Mar 17 2020 sucrack\n-rwsr-xr-x 1 root root 140944 Jul 5 2020 sudo\n"})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(96540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);